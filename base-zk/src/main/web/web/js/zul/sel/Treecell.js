(function(){zul.sel.Treecell=zk.$extends(zul.LabelImageWidget,{setWidth:zk.$void,_colspan:1,setColspan:(function(a,b,c){return function(d,e){var f=this[a];this.__fname__=a.substring(1);this[a]=d=b.apply(this,arguments);if(f!==d||(e&&e.force)){c.apply(this,arguments)}delete this.__fname__;return this}})("_colspan",(function(a){return a>1?a:1}),(function(){var a=this.$n();if(a){a.colSpan=this._colspan}})),getColspan:_zkf$=function(){return this._colspan},isColspan:_zkf$,getTree:function(){return this.parent?this.parent.getTree():null},domStyle_:function(c){var b=this.$super("domStyle_",zk.copy(c,{width:true})),a=this.getTreecol();return this.isVisible()&&a&&!a.isVisible()?b+"display:none;":b},getTreecol:function(){var a=this.getTree();if(a&&a.treecols){var b=this.getChildIndex();if(b<a.treecols.nChildren){return a.treecols.getChildAt(b)}}return null},getLevel:function(){return this.parent?this.parent.getLevel():0},getMaxlength:function(){var a=this.getTreecol();return a?a.getMaxlength():0},domLabel_:function(){return zUtl.encodeXML(this.getLabel(),{maxlength:this.getMaxlength()})},getTextNode:function(){return this.getCaveNode()},domContent_:function(){var b=this.$supers("domContent_",arguments),a=this._colHtmlPre();return b?a?a+'<span class="'+this.$s("text")+'">&nbsp;'+b+"</span>":b:a},bind_:function(){this.$supers("bind_",arguments);if(this._clearCache){this._clearCache=false;var a;if(a=this.parent){a.clearCache()}}},doMouseOver_:function(a){var b=this.$n();if(b&&zk.gecko&&(this._draggable||this.parent._draggable)&&!jq.nodeName(a.domTarget,"input","textarea")){jq(b).addClass("z-draggable-over")}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){var b=this.$n();if(b&&zk.gecko&&(this._draggable||this.parent._draggable)&&!jq.nodeName(a.domTarget,"input","textarea")){jq(b).removeClass("z-draggable-over")}this.$supers("doMouseOut_",arguments)},doFocus_:function(b){this.$supers("doFocus_",arguments);var a=this.getTree(),g=a?a.frozen:null,d=a&&a._treechildren?a._treechildren.$n():null,h,f;if(g&&d){f=jq(b.domTarget).parents("td");for(var e=0,c=f.length;e<c;e++){h=f[e];if(h.parentNode.parentNode==d){a._moveToHidingFocusCell(h.cellIndex);break}}}},_syncIcon:function(a){this.rerender(a?-1:false);var b;if(b=this.parent){this._clearCache=true}},_colHtmlPre:function(){if(this.parent.firstChild==this){var i=this.parent.parent,n=i.getTree(),h=[];if(n){if(n.isCheckmark()){var d=i.isCheckable(),f=n.isMultiple(),l=f?i.$s("checkbox"):i.$s("radio"),e=f?" z-icon-check":" z-icon-radio";h.push('<span id="',this.parent.uuid,'-cm" class="',i.$s("checkable")," ",l);if(!d||i.isDisabled()){h.push(" ",i.$s("disabled"))}h.push('"');if(!d){h.push(' style="visibility:hidden"')}h.push('><i class="',i.$s("icon"),e,'"></i></span>')}}var g=n?n.getZclass():"",m=this._getTreeitems(i,n);for(var c=0,b=m.length;c<b;++c){this._appendIcon(h,g,"spacer",false)}if(i.isContainer()){var a=i.isOpen()?"open":"close";this._appendIcon(h,g,a,true)}else{this._appendIcon(h,g,"spacer",false)}return h.join("")}else{return !this.getImage()&&!this.getLabel()&&!this.nChildren?"&nbsp;":null}},_getTreeitems:function(d,a){var b=[];for(;;){var c=d.parent;if(!c){break}d=c.parent;if(!d||d==a){break}b.unshift(d)}return b},_appendIcon:function(h,d,b,c){var a=[];h.push('<span class="');if(b=="spacer"){h.push(d,"-line ",d,"-",b,'"');a.push("&nbsp;")}else{var g="";if(c){var f=this.parent;if(f){g=f.uuid+"-icon"}}h.push(d,'-icon"');var e=this.getIconOpenClass_();if(b.indexOf("close")>-1){e=this.getIconCloseClass_()}a.push('<i id="',g,'" class="',e," ",d,"-",b,'"></i>')}if(c){var f=this.parent;if(f){h.push(' id="',f.uuid,'-open"')}}h.push(">",a.join(""),"</span>");a=null},getIconOpenClass_:function(){return"z-icon-caret-down"},getIconCloseClass_:function(){return"z-icon-caret-right"},getWidth:function(){var a=this.getTreecol();return a?a.getWidth():null},domAttrs_:function(){return this.$supers("domAttrs_",arguments)+(this._colspan>1?' colspan="'+this._colspan+'"':"")},updateDomContent_:function(){this.$supers("updateDomContent_",arguments);if(this.parent){this.parent.clearCache()}},deferRedrawHTML_:function(a){a.push("<td",this.domAttrs_({domClass:1}),' class="z-renderdefer"></td>')}})})();