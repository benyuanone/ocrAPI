(function(){function b(d){zWatch.listen({onSize:d});var c;if(c=d._upload){d._uplder=new zul.Upload(d,null,c)}}function a(d){var c;if(c=d._uplder){zWatch.unlisten({onSize:d});d._uplder=null;c.destroy()}}zul.wgt.Toolbarbutton=zk.$extends(zul.LabelImageWidget,{_orient:"horizontal",_dir:"normal",_mode:"default",_checked:false,setMode:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_mode",(function(c){this.rerender()})),getMode:_zkf$=function(){return this._mode},isMode:_zkf$,setChecked:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_checked",(function(c){if(this.desktop&&this._mode=="toggle"){jq(this.$n())[c?"addClass":"removeClass"](this.$s("checked"))}})),getChecked:_zkf$=function(){return this._checked},isChecked:_zkf$,setDisabled:(function(c,d,e){return function(f,g){var h=this[c];this.__fname__=c.substring(1);this[c]=f=d.apply(this,arguments);if(h!==f||(g&&g.force)){e.apply(this,arguments)}delete this.__fname__;return this}})("_disabled",(function(c,d){if(d&&d.adbs){this._adbs=true}else{if(!d||d.adbs===undefined){this._adbs=false}}if(!c){if(this._adbs){this._adbs=false}else{if(d&&d.adbs===false){return this._disabled}}}return c}),(function(c,d){this.rerender(d&&d.skip?-1:0)})),getDisabled:_zkf$=function(){return this._disabled},isDisabled:_zkf$,setHref:(function(c){return function(d){this[c]=d;return this}})("_href"),getHref:_zkf$=function(){return this._href},isHref:_zkf$,setTarget:(function(c){return function(d){this[c]=d;return this}})("_target"),getTarget:_zkf$=function(){return this._target},isTarget:_zkf$,setDir:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_dir",(_zkf=function(){this.updateDomContent_()})),getDir:_zkf$=function(){return this._dir},isDir:_zkf$,setOrient:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_orient",(_zkf)),getOrient:_zkf$=function(){return this._orient},isOrient:_zkf$,setTabindex:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_tabindex",(function(c){var d=this.$n();if(d){d.tabIndex=c||""}})),getTabindex:_zkf$=function(){return this._tabindex},isTabindex:_zkf$,setAutodisable:(function(c){return function(d){this[c]=d;return this}})("_autodisable"),getAutodisable:_zkf$=function(){return this._autodisable},isAutodisable:_zkf$,setUpload:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_upload",(function(c){var d=this.$n();if(d){a(this);if(c&&c!="false"&&!this._disabled){b(this)}}})),getUpload:_zkf$=function(){return this._upload},isUpload:_zkf$,getTextNode:function(){return this.$n("cnt")},bind_:function(){this.$supers(zul.wgt.Toolbarbutton,"bind_",arguments);if(!this._disabled){var c=this.$n();this.domListen_(c,"onFocus","doFocus_").domListen_(c,"onBlur","doBlur_")}if(!this._disabled&&this._upload){b(this)}},unbind_:function(){a(this);var c=this.$n();this.domUnlisten_(c,"onFocus","doFocus_").domUnlisten_(c,"onBlur","doBlur_");this.$supers(zul.wgt.Toolbarbutton,"unbind_",arguments)},domContent_:function(){var e=zUtl.encodeXML(this.getLabel()),c=this.getImage(),d=this.domIcon_();if(!c&&!d){return e}if(!c){c=d}else{c='<img src="'+c+'" align="absmiddle" />'+(d?" "+d:"")}var f=e?"vertical"==this.getOrient()?"<br/>":"&nbsp;":"";return this.getDir()=="reverse"?e+f+c:c+f+e},domClass_:function(f){var d=[this.$supers("domClass_",arguments)],e=this.getZclass(),c=(!f||!f.zclass);if(this._mode=="toggle"&&this._checked&&c&&e){d.push(" ",this.$s("checked"))}return d.join("")},domAttrs_:function(e){var c=this.$supers("domAttrs_",arguments),d=this.getTabindex();if(this._disabled){c+=' disabled="disabled"'}if(d){c+=' tabIndex="'+d+'"'}return c},onSize:function(){if(this._uplder){this._uplder.sync()}},doClick_:function(e){if(!this._disabled){if(!this._upload){zul.wgt.ADBS.autodisable(this)}else{if(!zk.ie||zk.ie>10){this._uplder.openFileDialog()}}this.fireX(e);if(!e.stopped){var f=this._href,d=f?f.toLowerCase().startsWith("mailto:"):false;if(f){if(d){var c=jq.newFrame("mailtoFrame",f,null);jq(c).remove()}else{zUtl.go(f,{target:this._target||(e.data.ctrlKey?"_blank":"")})}}this.$super("doClick_",e,true);if(this._mode=="toggle"){this.setChecked(!this.isChecked());this.fire("onCheck",this.isChecked())}}}}})})();