(function(){var b={warning:"z-icon-exclamation-circle",info:"z-icon-info-circle",error:"z-icon-times-circle"};var a={u:"up",d:"down",l:"left",r:"right"};zul.wgt.Notification=zk.$extends(zul.wgt.Popup,{$init:function(d,c){this.$supers(zul.wgt.Notification,"$init",arguments);this._msg=d;this._type=c.type;this._ref=c.ref;this._dur=c.dur;this._closable=c.closable},redraw:function(c){var e=this.uuid,d=this.$s("icon");c.push("<div",this.domAttrs_(),">");if(this._ref){c.push('<div id="',e,'-p" class="',this.$s("pointer"),'"></div>')}c.push('<i id="',e,'-icon" class="',d," ",(b[this._type]),'"></i>');c.push('<div id="',e,'-cave" class="',this.$s("content"),'">',this._msg,"</div>");if(this._closable){c.push('<div id="',e,'-cls" class="',this.$s("close"),'"><i id="',e,'-clsIcon" class="',d,' z-icon-times"></i></div>')}c.push("</div>")},domClass_:function(f){var d=this._type,e=this._ref,c=this.$supers(zul.wgt.Notification,"domClass_",arguments);if(d){c+=" "+this.$s(zUtl.encodeXML(d))}return c},doClick_:function(c){var d=c.domTarget;if(d==this.$n("cls")||d==this.$n("clsIcon")){this.close()}else{this.$supers("doClick_",arguments)}},onFloatUp:function(c,d){if(d&&d.triggerByFocus){return}if(!this.isVisible()){return}var f=c.origin;for(var e;f;f=f.parent){if(f==this){if(!e){this.setTopmost()}return}if(f==this.parent&&f.ignoreDescendantFloatUp_(this)){return}e=e||f.isFloating_()}if(!this._closable&&this._dur<=0){this.close({sendOnOpen:true})}},open:function(e,f,c,d){this.$supers(zul.wgt.Notification,"open",arguments);this._fixarrow(e);zk(this).redoCSS(-1,{fixFontIcon:true})},position:function(e,f,c,d){this.$supers(zul.wgt.Notification,"position",arguments);this._fixarrow(e)},_posInfo:function(e,f,c,d){this._fixPadding(c);return this.$supers(zul.wgt.Notification,"_posInfo",arguments)},_fixPadding:function(c){var e=this.$n("p");if(!e){return}var g=this.$n(),d=2+(zk(e).borderWidth()/2)||0,f=2+(zk(e).borderHeight()/2)||0;g.style.padding="0";switch(c){case"before_start":case"before_center":case"before_end":this._dir="d";g.style.paddingBottom=f+"px";break;case"after_start":case"after_center":case"after_end":this._dir="u";g.style.paddingTop=f+"px";break;case"end_before":case"end_center":case"end_after":this._dir="l";g.style.paddingLeft=d+"px";break;case"start_before":case"start_center":case"start_after":this._dir="r";g.style.paddingRight=d+"px";break;case"top_left":case"top_center":case"top_right":case"middle_left":case"middle_center":case"middle_right":case"bottom_left":case"bottom_center":case"bottom_right":case"overlap":case"overlap_end":case"overlap_before":case"overlap_after":this._dir="n";break;default:this._dir="n"}},_fixarrow:function(d){var l=this.$n("p");if(!l){return}var e=this.$s("pointer"),o=this.$n(),c=d.$n(),m=this._dir,i=zk(l),j=i.borderWidth(),t=i.borderHeight(),k=zk(o).revisedOffset(),f=zk(c).revisedOffset(),v=(c.offsetWidth-j)/2,u=(c.offsetHeight-t)/2;if(m!="n"){if(m=="u"||m=="d"){var s=m=="u",r=(o.offsetWidth-j)/2||0,q=f[0]-k[0]+v||0;l.style.left=(c.offsetWidth>=o.offsetWidth?r:q)+"px";l.style[s?"top":"bottom"]=((2-t/2)||0)+"px";l.style[s?"bottom":"top"]=""}else{var s=m=="l",h=(o.offsetHeight-t)/2||0,g=f[1]-k[1]+u||0;l.style.top=(c.offsetHeight>=o.offsetHeight?h:g)+"px";l.style[s?"left":"right"]=((2-j/2)||0)+"px";l.style[s?"right":"left"]=""}l.className=e+(a[m]?" "+this.$s(a[m]):"");jq(l).show()}else{l.className=e;jq(l).hide()}},openAnima_:function(f,g,c,e){var d=this;jq(this.$n()).fadeIn(500,function(){d.afterOpenAnima_(f,g,c,e)})},closeAnima_:function(d){var c=this;jq(this.$n()).fadeOut(500,function(){c.afterCloseAnima_(d)})},afterCloseAnima_:function(c){this.detach()}},{show:function(g,i,c){if(!c){c={}}var k=zk.Widget.$(i),h=c.ref,j=c.pos,d=c.dur,e=new zul.wgt.Notification(g,c),f=c.off;if(!j&&!f){j=h?"end_center":"middle_center"}if(!k){k=zk.Desktop.$().firstChild}k.appendChild(e);e.open(h,f,j);if(d>0){setTimeout(function(){if(e.desktop){e.close()}},d)}}})})();