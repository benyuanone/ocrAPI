(function(){var d;function g(z){var R=z.$n(),V=R?R.style.whiteSpace:"";if(R){if(zk.ie8){z._wsbak=V}R.style.whiteSpace="nowrap"}var Q,I,t,H,G,S,r=z.ehdfaker,p=z.ebdfaker,D=z.eftfaker,v=z.head,X=v?v.$n():null,A=[],O=[],N=[],l=[],J=[];if(z.eheadtbl&&X){z.ehead.style.width="";Q=z.eheadtbl.width;z.eheadtbl.width="";z.eheadtbl.style.width="";H=z.eheadtbl.style.tableLayout;z.eheadtbl.style.tableLayout="";if(zk.chrome){z.ebodytbl.style.display="block"}var m=r.firstChild,K=X.firstChild;for(var P=0;m;m=m.nextSibling,P++){var T=K.firstChild;if(!T){continue}A[P]=m.style.width;m.style.width="";l[P]=K.style.width;K.style.width="";J[P]=T.style.width;T.style.width="";K=K.nextSibling}}if(X){X.style.width=""}if(z.efoottbl){z.efoot.style.width="";I=z.efoottbl.width;z.efoottbl.width="";z.efoottbl.style.width="";G=z.efoottbl.style.tableLayout;z.efoottbl.style.tableLayout="";if(zk.chrome){z.ebodytbl.style.display="block"}if(D){var W=D.firstChild;for(var P=0;W;W=W.nextSibling){N[P++]=W.style.width;W.style.width=""}}}if(z.ebodytbl){z.ebody.style.width="";t=z.ebodytbl.width;z.ebodytbl.width="";z.ebodytbl.style.width="";S=z.ebodytbl.style.tableLayout;z.ebodytbl.style.tableLayout="";if(zk.chrome){z.ebodytbl.style.display="block"}if(p){var k=p.firstChild;for(var P=0;k;k=k.nextSibling){O[P++]=k.style.width;k.style.width=""}}}var y=[],j=0,x=v?v.nChildren:0,M=v?v=v.firstChild:null,Y=z.getHeadWidget(),C=0,s;if(p&&M){var E=z._getFirstRowCells(z.ebodyrows),L=D?z._getFirstRowCells(z.efootrows):null;for(var P=0;P<x;P++){var o=E&&E[P]?E[P].offsetWidth:0,u=zk(M.$n("cave")),q=M&&M.isVisible()?(u.textSize()[0]+u.padBorderWidth()+zk(M.$n()).padBorderWidth()):0,F=L&&L[P]&&zk(L[P]).isVisible()?L[P].offsetWidth:0,n;if((n=Y.getChildAt(P))&&n.getWidth()){q=Math.max(q,F)}if(q>o){o=q}if(F>o){o=F}y[P]=o;if(zk.ff>4||zk.ie>8){++y[P]}j+=y[P];if(M){M=M.nextSibling}}z._deleteFakeRow(z.ebodyrows);if(D){z._deleteFakeRow(z.efootrows)}}else{var U;if(U=e(z)){for(var B=U.cells,P=B.length;P--;){var o=B[P].offsetWidth;y[P]=o;if(zk.ff>4||zk.ie>8){++y[P]}j+=y[P]}}}if(z.eheadtbl&&X){z.eheadtbl.width=Q||"";z.eheadtbl.style.tableLayout=H||"";if(zk.chrome){z.eheadtbl.style.display=""}var m=r.firstChild,K=X.firstChild;for(var P=0;m;m=m.nextSibling,P++){var T=K.firstChild;if(!T){continue}m.style.width=A[P];K.style.width=l[P];T.style.width=J[P];K=K.nextSibling}}if(z.efoottbl){z.efoottbl.width=I||"";z.efoottbl.style.tableLayout=G||"";if(zk.chrome){z.efoottbl.style.display=""}if(D){var W=D.firstChild;for(var P=0;W;W=W.nextSibling){W.style.width=N[P++]}}}if(z.ebodytbl){z.ebodytbl.width=t||"";z.ebodytbl.style.tableLayout=S||"";if(zk.chrome){z.ebodytbl.style.display=""}if(p){var k=p.firstChild;for(var P=0;k;k=k.nextSibling){k.style.width=O[P++]}}}if(R){R.style.whiteSpace=V}return{width:j,wds:y}}function h(v,o){var r=v.isSizedByContent(),m=v._hflex=="min";if(!v.head&&(m||r)){var l=zk(v.$n()).padBorderWidth(),k=c(v)+l,t=v.ebodytbl,j=v._minWd.wds,q=j.length;if(o&&m){v.setFlexSize_({width:k},true)}if(!(t=t.firstChild)||!(t=t.firstChild)){return}for(var s=t.firstChild,n=0;s&&(n<q);s=s.nextSibling){s.style.width=jq.px(j[n++])}if(r&&!m){var p=t.lastChild,u=v.uuid+"-bdflex";if(!p||p.id!=u){jq(t).append('<td id="'+u+'"></td>');p=t.lastChild}}}}function b(v,x){var q=v.ebody;if(!q){return}var r=q.offsetHeight;if(zk(q).hasHScroll()){r-=jq.scrollbarWidth()}if(r==v._prehgh){return false}v._prehgh=r;var k=v.ebodytbl,t=k.offsetParent,i=k.offsetTop,l=0,u,m=0;for(var n=v.getBodyWidgetIterator({skipHidden:true}),o=x.length,s;(s=n.next())&&m<o;m++){u=x[m];var p=u.offsetTop-(u.offsetParent==t?i:0);if(p>r){--m;break}l=p}if(u){if(p<=r){l=l+u.offsetHeight;m=Math.floor(m*r/l)}if(m==0){m=1}if(m!=v.getPageSize()){v.fire("onPageSize",{size:m});return true}}}function a(j){if(j._hflex=="min"){var i=c(j),k=j.$n();j._hflexsz=i+zk(k).padBorderWidth();k.style.width=jq.px0(j._hflexsz)}}function c(r){r._calcMinWds();var p=r.ebdfaker,m,j=[],k,l=r._minWd.wds;if(r.head&&p){k=0;var q=r.head.firstChild,o=p.firstChild;for(var n=0;q;q=q.nextSibling){if(q._hflex=="min"){m=j[n]=l[n]+zk(q.$n()).padBorderWidth()}else{if(q._width&&q._width.indexOf("px")>0){m=j[n]=zk.parseInt(q._width)}else{m=j[n]=zk.parseInt(o.style.width)}}q._origWd=jq.px0(m);k+=m;++n;o=o.nextSibling}}else{k=r._minWd.width}return k}function e(n){var m=n.getBodyWidgetIterator().next(),l=m?m.$n():null;if(!l){return}for(var k=l,j,i=k.cells.length;l;l=l.nextSibling){if((j=l.cells.length)>i){k=l;i=j}}return k}function f(r){var E=r.efootrows.rows[0],i=r.ebodyrows.rows;if(!E||!i||!i.length||!E.cells.length){return}var q=E.cells.length,o,t=0;for(var B=0,m=r.getBodyWidgetIterator({skipHidden:true}),u;(u=m.next());){if(r._modal&&!u._loaded){continue}var n=i[B++],A=zk(n),l=n.cells,p=A.ncols(),z=l.length==p&&A.isVisible();if(z&&p>=q){t=q;o=n;break}if(p>t){o=z?n:null;t=p}else{if(p==t&&!o&&z){o=n}}}if(!t){return}var D=!o;if(D){o=document.createElement("TR");o.style.height="0px";for(var B=0;B<t;++B){o.appendChild(document.createElement("TD"))}i[0].parentNode.appendChild(o)}for(var B=t;B--;){E.cells[B].style.width=""}var k=0;for(var B=t;B--;){var C=E.cells[B],y=o.cells[B];if(zk.opera){k+=y.offsetWidth;C.style.width=zk(y).contentWidth()}else{C.style.width=y.offsetWidth+"px";if(t>1){var x=y.offsetWidth-C.offsetWidth;if(x!=0){x+=y.offsetWidth;if(x<0){x=0}C.style.width=x+"px"}}}}if(zk.opera&&r.isSizedByContent()){E.parentNode.parentNode.style.width=k+"px"}if(D){o.parentNode.removeChild(o)}}zul.mesh.MeshWidget=zk.$extends(zul.Widget,{_pagingPosition:"bottom",_prehgh:-1,_minWd:null,$init:function(){this.$supers("$init",arguments);this.heads=[]},_innerWidth:"100%",_currentTop:0,_currentLeft:0,setPagingPosition:(function(i,j){return function(k,l){var m=this[i];this[i]=k;if(m!==k||(l&&l.force)){this.__fname__=i.substring(1);j.apply(this,arguments);delete this.__fname__}return this}})("_pagingPosition",(_zkf=function(){this.rerender()})),getPagingPosition:_zkf$=function(){return this._pagingPosition},isPagingPosition:_zkf$,setSizedByContent:(function(i,j){return function(k,l){var m=this[i];this[i]=k;if(m!==k||(l&&l.force)){this.__fname__=i.substring(1);j.apply(this,arguments);delete this.__fname__}return this}})("_sizedByContent",(_zkf)),getSizedByContent:_zkf$=function(){return this._sizedByContent},isSizedByContent:_zkf$,setSpan:(function(i,j){return function(k,l){var m=this[i];this[i]=k;if(m!==k||(l&&l.force)){this.__fname__=i.substring(1);j.apply(this,arguments);delete this.__fname__}return this}})("_span",(function(j){var i=(true===j||"true"==j)?-65500:(false===j||"false"==j)?0:(zk.parseInt(j)+1);this._nspan=i<0&&i!=-65500?0:i;this.rerender()})),getSpan:_zkf$=function(){return this._span},isSpan:_zkf$,setAutopaging:(function(i,j){return function(k,l){var m=this[i];this[i]=k;if(m!==k||(l&&l.force)){this.__fname__=i.substring(1);j.apply(this,arguments);delete this.__fname__}return this}})("_autopaging",(_zkf)),getAutopaging:_zkf$=function(){return this._autopaging},isAutopaging:_zkf$,setPaginal:(function(i){return function(j){this[i]=j;return this}})("_paginal"),getPaginal:_zkf$=function(){return this._paginal},isPaginal:_zkf$,setModel:(function(i){return function(j){this[i]=j;return this}})("_model"),getModel:_zkf$=function(){return this._model},isModel:_zkf$,setInnerWidth:(function(i,j){return function(k,l){var m=this[i];this[i]=k;if(m!==k||(l&&l.force)){this.__fname__=i.substring(1);j.apply(this,arguments);delete this.__fname__}return this}})("_innerWidth",(function(i){if(i==null){this._innerWidth=i="100%"}if(this.eheadtbl){this.eheadtbl.style.width=i}if(this.ebodytbl){this.ebodytbl.style.width=i}if(this.efoottbl){this.efoottbl.style.width=i}})),getInnerWidth:_zkf$=function(){return this._innerWidth},isInnerWidth:_zkf$,getPageSize:function(){return(this.paging||this._paginal).getPageSize()},setPageSize:function(i){(this.paging||this._paginal).setPageSize(i)},getPageCount:function(){return(this.paging||this._paginal).getPageCount()},getActivePage:function(){return(this.paging||this._paginal).getActivePage()},setActivePage:function(i){(this.paging||this._paginal).setActivePage(i)},inPagingMold:function(){return"paging"==this.getMold()},setHeight:function(i){this.$supers("setHeight",arguments);if(this.desktop){this._setHgh(i);this.onSize()}},setWidth:function(i){this.$supers("setWidth",arguments);if(this.eheadtbl){this.eheadtbl.style.width=""}if(this.efoottbl){this.efoottbl.style.width=""}if(this.desktop){this.onSize()}},setStyle:function(i){if(this._style!=i){this.$supers("setStyle",arguments);if(this.desktop){this.onSize()}}},getHeadWidget:function(){return this.head},getFocusCell:function(i){var j;jq([this.ebodytbl,this.eheadtbl,this.efoottbl]).each(function(l){if(this&&jq.isAncestor(this,i)){var m=jq(i).parents(l==1?"th":"td");for(var l=0,k=m.length;l<k;l++){j=m[l];if(jq(j).parents("table")[0]==this){return false}}}});return j},_moveToHidingFocusCell:function(i){var l=this.ehdfaker?this.ehdfaker.childNodes[i]:null,k=this.frozen,j;if(l&&k&&zk.parseInt(l.style.width)==0&&(i=i-k.getColumns())>=0){if(this._nativebar){k.setStart(i)}else{if(j=this._scrollbar){k._doScrollNow(i);j.setBarPosition(i)}}d=true}},_restoreFocus:function(){if(d&&zk.currentFocus){d=false;zk.currentFocus.focus()}},bind_:function(){this.$supers(zul.mesh.MeshWidget,"bind_",arguments);this._bindDomNode();if(this._hflex!="min"){this._fixHeaders()}if(this.ehead){this.domListen_(this.ehead,"onScroll","_doSyncScroll")}var i=this.ebody;if(this._nativebar&&i){this.domListen_(i,"onScroll","_doScroll");i.style.overflow="auto";if(this.efrozen){jq(i).css("overflow-x","hidden")}}zWatch.listen({onSize:this,onResponse:this})},unbind_:function(){zWatch.unlisten({onSize:this,onResponse:this});if(this.ehead){this.domUnlisten_(this.ehead,"onScroll","_doSyncScroll")}var i=this.ebody;if(this._nativebar&&i&&this.efrozen){jq(i).css("overflow-x","auto")}this.$supers(zul.mesh.MeshWidget,"unbind_",arguments)},clearCache:function(){this.$supers("clearCache",arguments);this.ebody=this.ehead=this.efoot=this.efrozen=this.ebodytbl=this.eheadtbl=this.efoottbl=this.ebodyrows=this.ehdfaker=this.ebdfaker=null},syncSize:function(){if(this.desktop){this.clearCachedSize_();if(this._hflex=="min"){zFlex.onFitSize.apply(this)}else{this._calcMinWds();this._fixHeaders();this.onSize()}}},onResponse:function(){if(this._shallSize){this.syncSize();this._shallSize=false}},_syncSize:function(){if(this.desktop){this._shallSize=true}},_fixHeaders:function(k){if(this.head&&this.ehead){var s=true,t=false,u=(this._hflex=="min")||this.isSizedByContent();for(var q=this.heads.length;q-->0;){var r=this.heads[q],o=true;for(var v=r.firstChild;v;v=v.nextSibling){var j=this.ehdfaker.childNodes[q];if(!j){continue}if(u&&!j.style.width&&!v._nhflex){v._hflex="min";v._nhflex=-65500;v._nhflexbak=true}if(!t&&v._nhflex){t=true}if(v.getLabel()||v.getImage()||v.nChildren){o=false;s=false}}if(r._visible){var m=r.$n();if(m){m.style.display=o?"none":""}}}var l=this.ehead.style.display,p=k&&t&&this.isRealVisible();this.ehead.style.display=s?"none":"";for(var v=this.head.firstChild;v;v=v.nextSibling){if(p&&v._nhflex){v.fixFlex_()}if(v._nhflexbak){delete v._hflex;delete v._nhflex;delete v._nhflexbak}}return l!=this.ehead.style.display}},_adjFlexWd:function(){var t=this.head;if(t){var m=this.ehdfaker,u=this.ebdfaker,j=m.firstChild,s=u.firstChild,y=this.eftfaker,k;if(y){k=y.firstChild}this.eheadtbl.style.width="";this.ebodytbl.style.width="";var q=0;for(var x=t.firstChild,n;x&&s;x=x.nextSibling){var l=x.$n().offsetWidth;if(x.isVisible()&&l>0.1){x._origWd=jq.px0(l)}if(x.isVisible()&&(n=x._hflexWidth)!==undefined){var i=zk(s).revisedWidth(Math.round(n));x._origWd=i+"px";s.style.width=i+"px";j.style.width=s.style.width;if(k){k.style.width=s.style.width}q+=i}s=s.nextSibling;j=j.nextSibling;if(k){k=k.nextSibling}}var r=this._isAllWidths();if(r){var p=this.eheadtbl,v=this.ebodytbl,o=this.efoottbl;if(p){p.style.width=q+"px";if(v){v.style.width=q+"px"}if(o){o.style.width=q+"px"}}}a(this)}},_bindDomNode:function(){this.ehead=this.$n("head");this.eheadtbl=this.$n("headtbl");this.ebody=this.$n("body");this.ebodytbl=this.$n("cave");this.efoot=this.$n("foot");this.efoottbl=this.$n("foottbl");this.efrozen=this.$n("frozen");var i=this.$n("rows");if(this.ebody&&i){this.ebodyrows=i}if(this.ehead){this.eheadrows=this.$n("headrows");this.ehdfaker=this.head.$n("hdfaker");this.ebdfaker=this.head.$n("bdfaker");if(this.efoot){this.eftfaker=this.head.$n("ftfaker")}}if(this.efoot){this.efootrows=this.$n("footrows")}},replaceHTML:function(){var i=this._syncingbodyrows;this._syncingbodyrows=true;try{this.$supers(zul.mesh.MeshWidget,"replaceHTML",arguments)}finally{this._syncingbodyrows=i}},replaceChildHTML_:function(){var i=this._syncingbodyrows;this._syncingbodyrows=true;try{this.$supers("replaceChildHTML_",arguments)}finally{this._syncingbodyrows=i}},fireOnRender:function(i){if(!this._pendOnRender){this._pendOnRender=true;setTimeout(this.proxy(this._onRender),i?i:100)}},_doScroll:function(){var m=zul.mesh.Scrollbar.getScrollPosV(this),j=zul.mesh.Scrollbar.getScrollPosH(this),k=(m!=this._currentTop||j!=this._currentLeft),i=this.ebody,o=this.ehead,n=this.efoot;if(jq(this).data("scrollable")){zWatch.fireDown("onScroll",this)}if(k&&!(this.fire("onScroll",i.scrollLeft).stopped)&&this._nativebar){if(this._currentLeft!=i.scrollLeft){if(o){o.scrollLeft=i.scrollLeft}if(n){n.scrollLeft=i.scrollLeft}}}if(k){this._currentTop=m}if(k){this._currentLeft=j}if(!this.paging&&!this._paginal){this.fireOnRender(zk.gecko?200:60)}if(k){this._fireOnScrollPos()}},_doSyncScroll:function(){var k=this.ehead,i=this.ebody,j=this.efoot;if(k&&zk(k).isVisible()){if(this._currentLeft!=k.scrollLeft){if(i){i.scrollLeft=k.scrollLeft}if(j){j.scrollLeft=k.scrollLeft}}}},_timeoutId:null,_fireOnScrollPos:function(i){clearTimeout(this._timeoutId);this._timeoutId=setTimeout(this.proxy(this._onScrollPos),i>=0?i:300)},_onScrollPos:function(){if(this.ebody){this._currentTop=zul.mesh.Scrollbar.getScrollPosV(this);this._currentLeft=zul.mesh.Scrollbar.getScrollPosH(this);this.fire("onScrollPos",{top:this._currentTop,left:this._currentLeft})}},_onRender:function(){if(!this.$n()){return}this._pendOnRender=false;if(this._syncingbodyrows||zAu.processing()){this.fireOnRender(zk.gecko?200:60);return true}var t=this.ebodyrows?this.ebodyrows.rows:null;if(this.inPagingMold()&&this._autopaging&&t&&t.length){if(b(this,t)){return}}if(zk.ie8&&(this._wsbak!==undefined)){this.$n().style.whiteSpace=this._wsbak;delete this._wsbak}if(!this.desktop||!this._model||!t||!t.length){return}var o=[],i=zul.mesh.Scrollbar.getScrollPosV(this),q=i+this.ebody.offsetHeight;for(var k=0,l=this.getBodyWidgetIterator({skipHidden:true}),m=t.length,r;(r=l.next())&&k<m;k++){if(!r._loaded){var s=r.$n(),n=zk(s),p=n.offsetTop();if(p+n.offsetHeight()<i){continue}if(p>q){break}o.push(r)}}if(o.length){this.fire("onRender",{items:o},{implicit:true})}},onSize:function(){if(this.isRealVisible()){var j=this.$n();if(j._lastsz&&j._lastsz.height==j.offsetHeight&&j._lastsz.width==j.offsetWidth){this.fireOnRender(155);return}this._calcSize();this.fireOnRender(155);if(this._nativebar){var i=this.ebody;if(i.scrollHeight>=this._currentTop){i.scrollTop=this._currentTop}if(i.scrollWidth>=this._currentLeft){i.scrollLeft=this._currentLeft;if(this.ehead){this.ehead.scrollLeft=this._currentLeft}if(this.efoot){this.efoot.scrollLeft=this._currentLeft}}}this._shallSize=false}},_vflexSize:function(){var m=this.$n(),i=0;if(this.paging){var l=this.$n("pgit"),j=this.$n("pgib");if(l){i+=l.offsetHeight}if(j){i+=j.offsetHeight}}var k=zk(m).contentHeight()-(this.ehead?this.ehead.offsetHeight:0)-(this.efoot?this.efoot.offsetHeight:0)-i;return this.frozen&&this._nativebar?k-this.efrozen.offsetHeight:k},setFlexSize_:function(j){var k=this.$n(),i=this.$n("head");if(j.height!==undefined){if(j.height=="auto"){k.style.height="";if(i){i.style.height=""}}else{return this.$supers("setFlexSize_",arguments)}}if(j.width!==undefined){if(j.width=="auto"){if(this._hflex!="min"){k.style.width=""}if(i){i.style.width=""}}else{return this.$supers("setFlexSize_",arguments)}}},_setHgh:function(j){var m=this.$n(),i=this.ebody,l=i.style;if(this.isVflex()||(j&&j!="auto"&&j.indexOf("%")<0)){if(zk.webkit&&l.height==jq.px(this._vflexSize())){return}l.height="";var k=this._vflexSize();if(k<0){k=0}if(this._vflex!="min"){l.height=k+"px"}}else{l.height="";m.style.height=j}},_ignoreHghExt:function(){return false},_calcSize:function(){this._beforeCalcSize();var q=this.$n(),o=zk(q).contentWidth(),j=this.isSizedByContent(),l=this.ehead,i=this.ebody,m=this.ebodyrows,k=this.efoot,p=this.efootrows;if(zk.ie9_&&i&&o){i.style.width=o+"px"}if(l){if(o){l.style.width=o+"px";if(i){i.style.width=o+"px"}if(k){k.style.width=o+"px"}}if(j&&m){this._adjHeadWd()}else{if(o&&k){k.style.width=o+"px"}}}else{if(k){if(o){k.style.width=o+"px"}if(p&&m){f(this)}}}this._adjSpanWd();h(this,true);if(j&&this.getRows&&this.getRows()>1&&(typeof this._calcHgh=="function")&&this.ebody.style.height){this._calcHgh()}q._lastsz={height:q.offsetHeight,width:q.offsetWidth};this._afterCalcSize()},_beforeCalcSize:function(){var i=this.ebody;if(!this._nativebar&&(i.scrollLeft||i.scrollTop)){this._ebodyScrollPos={l:i.scrollLeft,t:i.scrollTop}}this._setHgh(this.$n().style.height)},_afterCalcSize:function(){if(this._ebodyScrollPos){this.ebody.scrollLeft=this._ebodyScrollPos.l;this.ebody.scrollTop=this._ebodyScrollPos.t;this._ebodyScrollPos=null}var p=this._isAllWidths();if(p){var m=this.eheadtbl,q=this.ebodytbl,l=this.efoottbl;if(m){var k=0;for(var r=this.ehdfaker.firstChild;r;r=r.nextSibling){if(r.style.display!="none"&&!r.id.endsWith("hdfaker-bar")){k+=zk.parseInt(r.style.width)}}m.style.width=k+"px";if(q){q.style.width=k+"px"}if(l){l.style.width=k+"px"}}}else{if(this.frozen){if(this.ebody){var q=this.ebodytbl;if(q){q.style.width=this.ebody.style.width}}}}if(!this.frozen){var i=zk(this.ebody),o=i.hasHScroll(),s=i.hasVScroll(),j=this.head?this.head.$n("hdfaker-bar"):null,n=this.eftfaker?this.head.$n("ftfaker-bar"):null;if(s){if(j){j.style.width=s+"px"}if(n){n.style.width=s+"px"}}else{if(j){j.style.width=0.1+"px"}if(n){n.style.width=0.1+"px"}}}},_isAllWidths:function(){if(this.isSizedByContent()&&this.ebodyrows&&this.ebodyrows.firstChild){return true}if(!this.head){return false}var j=true;for(var i=this.head.firstChild;i;i=i.nextSibling){if(j&&(i._width===undefined||i._width.indexOf("px")<=0)&&(i._hflex!="min"||i._hflexsz===undefined)&&i.isVisible()){j=false;break}}return j},domFaker_:function(k,i){var l=this.head;k.push('<colgroup id="',l.uuid,i,'">');for(var j=l.firstChild;j;j=j.nextSibling){var m=j._hflexWidth?j._hflexWidth+"px":j.getWidth(),n=!j.isVisible()?"display:none;":"";m=m?"width: "+m+";":"";k.push('<col id="',j.uuid,i,'" style="',m,n,'"/>')}if(!this.frozen&&(i.indexOf("hd")>0||i.indexOf("ft")>0)){k.push('<col id="',l.uuid,i,'-bar" style="width: 0px" />')}k.push("</colgroup>")},onChildAdded_:function(n){this.$supers("onChildAdded_",arguments);if(n.$instanceof(this.getHeadWidgetClass())){this.head=n;this._minWd=null}else{if(!n.$instanceof(zul.mesh.Auxhead)){return}}var l=n.nextSibling;if(l){for(var m=this.heads,k=0,i=m.length;k<i;++k){if(m[k]==l){m.splice(k,0,n);return}}}this.heads.push(n)},onChildRemoved_:function(i){this.$supers("onChildRemoved_",arguments);if(i==this.head){this._minWd=this.head=null;this.heads.$remove(i)}else{if(i.$instanceof(zul.mesh.Auxhead)){this.heads.$remove(i)}else{if(i.$instanceof(zul.mesh.Frozen)){this.efrozen=null}}}},resetSize_:function(i){this.$supers("resetSize_",arguments);if(i=="w"){if(this.ehead){this.ehead.style.width=""}if(this.ebody){this.ebody.style.width=""}if(this.efoot){this.efoot.style.width=""}}},beforeMinFlex_:function(j){if(this._hflexsz===undefined&&j=="w"&&this._width===undefined){if(this.isSizedByContent()){this._calcSize()}if(this.head){this._fixHeaders(true);for(var i=this.head.firstChild;i;i=i.nextSibling){if(i._hflex=="min"&&i.hflexsz===undefined){return null}}}h(this);return c(this)}return null},beforeParentMinFlex_:function(i){if(i=="w"){if(this.isSizedByContent()){this._calcSize()}if(this.head){this._fixHeaders()}}else{this._calcSize()}},clearCachedSize_:function(){this.$supers("clearCachedSize_",arguments);this._clearCachedSize();var o;if(!this.ebdfaker&&(o=e(this))){for(var k=o.cells,m=k.length;m--;){k[m].style.width=""}}var l=this.getHeadWidget();if(l){for(var j=l.firstChild,n;j;j=j.nextSibling){delete j._hflexsz}}},_clearCachedSize:function(){var i;if(i=this.$n()){i._lastsz=this._minWd=null}},_calcMinWds:function(){if(!this._minWd){this._minWd=g(this)}return this._minWd},_adjSpanWd:function(){if(!this._isAllWidths()||!this.isSpan()){return}var B=this.ehdfaker,x=this.ebdfaker,k=this.eftfaker;if(!B||!x){return}var m=this.head.$n();if(!m){return}this._calcMinWds();var t,u=[],G=0,r=B.firstChild,E=x.firstChild,s=this._minWd.wds,I=this.head.nChildren;for(var n=r,y=this.head.firstChild,H=0;y;y=y.nextSibling,H++){if(zk(n).isVisible()){var F=y._width;if(y._hflex=="min"){t=u[H]=s[H]}else{if(F&&F.endsWith("px")){t=u[H]=zk.parseInt(F)}else{t=u[H]=zk.parseInt(n.style.width)}}G+=t}n=n.nextSibling}var z=k?k.firstChild:null,J=this.ebody.clientWidth,j=J-G,q=J,C=-1,l=0;if(this._nspan<0){for(var H=0;r&&H<I;r=r.nextSibling,H++){if(!zk(r).isVisible(true)){E=E.nextSibling;if(z){z=z.nextSibling}continue}else{u[H]=t=j<=0?u[H]:(((u[H]*J/G)+0.5)||0);var p=jq.px0(t);q-=t;C=H;r.style.width=p;E.style.width=p;l+=t;E=E.nextSibling;if(z){z.style.width=p;z=z.nextSibling}}}if(j>0&&q!=0&&C>=0){l-=t;t=u[C]+q;var p=jq.px0(t);x.childNodes[C].style.width=p;B.childNodes[C].style.width=p;l+=t;if(k){k.childNodes[C].style.width=p}}}else{C=this._nspan-1;for(var H=0;r&&H<I;r=r.nextSibling,H++){if(!zk(r).isVisible()){E=E.nextSibling;if(z){z=z.nextSibling}continue}else{t=C==H&&j>0?(u[C]+j):u[H];var p=jq.px0(t);r.style.width=p;E.style.width=p;l+=t;E=E.nextSibling;if(z){z.style.width=p;z=z.nextSibling}}}}var A=this._isAllWidths();if(A){var o=this.eheadtbl,D=this.ebodytbl,v=this.efoottbl;if(o){o.style.width=l+"px";if(D){D.style.width=l+"px"}if(v){v.style.width=l+"px"}}}if(zk.opera){zk(this.$n()).redoCSS()}},_adjHeadWd:function(){var t=this.ehdfaker,r=this.ebdfaker,j=this.eftfaker;if(!t||!r||!this.getBodyWidgetIterator().hasNext()){return}var z=this.eheadtbl,l=this.head.$n();if(!l){return}var y=this.ebody,x=this.ebodytbl,m=y.offsetWidth,B=Math.max(z.offsetWidth,x.offsetWidth),n=Math.min(m,x.offsetWidth);if(B==m&&m>n&&m-n<20){B=n}var k=this._calcMinWds(),q=k.wds,v=k.width,o=t.firstChild,u=r.firstChild,s=j?j.firstChild:null,A=this.head.firstChild;for(var w=0;A;A=A.nextSibling,w++){if(A._width||q[w]==0){if(q[w]==0){o.style.width=zk.chrome?"0.1px":"0px";u.style.width="0px";if(s){s.style.width="0px"}}o=o.nextSibling;u=u.nextSibling;if(s){s=s.nextSibling}}else{var p=jq.px(q[w]);o.style.width=u.style.width=p;o=o.nextSibling;u=u.nextSibling;if(s){s.style.width=p;s=s.nextSibling}}}z.style.width=jq.px(v);x.style.width=jq.px(v);if(j){this.efoottbl.style.width=jq.px(v)}a(this)},_getFirstRowCells:function(l){if(l&&l.rows&&l.rows.length){var k=l.rows[0].cells,o=k.length,p=0;for(var m=0;m<o;m++){var n=k[m].colSpan;p+=n!=1?n:1}if(p==o){return k}else{var j=[];j.push('<tr id="',l.id,'-fakeRow" style="visibility:hidden;height:0">');for(var m=0;m<p;m++){j.push("<td></td>")}j.push("</tr>");jq(l.rows[0]).before(j.join(""));j=null;return l.rows[0].cells}}},_deleteFakeRow:function(i){if(i){jq("#"+i.id+"-fakeRow").remove()}},refreshBar_:function(k,j){var m=this._scrollbar;if(m){var l=this._currentLeft,i=this._currentTop;m.syncSize(k||this._shallShowScrollbar);delete this._shallShowScrollbar;if(j){m.scrollTo(0,0)}else{m.scrollTo(l,i)}var n=this.frozen,o;if(n&&(o=n._start)!=0){n._doScrollNow(o);m.setBarPosition(o)}this._afterCalcSize()}},});zul.mesh.Scrollbar={init:function(o){var q=jq(o.$n()).data("embedscrollbar")!==false,n=o.frozen,j=0;if(n){var m=n.getColumns();if(o.eheadtbl){var k=o._getFirstRowCells(o.eheadrows);if(k){for(var l=0;l<m;l++){j+=k[l].offsetWidth}}o._deleteFakeRow(o.eheadrows)}}var p=new zul.Scrollbar(o.ebody,o.ebodytbl,{embed:q,startPositionX:j,onSyncPosition:function(){if(!this.frozen){var s=this.getCurrentPosition(),r=o.ehead,i=o.efoot;if(s&&this.hasHScroll()){if(r){r.scrollLeft=s.x}if(i){i.scrollLeft=s.x}}}},onScrollEnd:function(){o._doScroll()}});return p},getScrollPosV:function(j){var i=j._scrollbar;if(i){return i.getCurrentPosition().y}return j.ebody.scrollTop},getScrollPosH:function(j){var i=j._scrollbar;if(i){return i.getCurrentPosition().x}return j.ebody.scrollLeft}}})();