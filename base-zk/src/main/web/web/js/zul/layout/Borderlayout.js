(function(){var c={north:function(f,e,g,d){f.w=g-f.w;e.y=f.ts;e.h-=f.ts},south:function(f,e,g,d){f.w=g-f.w;f.y=d-f.y;e.h-=f.ts},east:function(e,d,f){e.y+=d.y;e.h=d.h-e.h;e.x=f-e.x;d.w-=e.ts},west:function(e,d){e.y+=d.y;e.h=d.h-e.h;d.x+=e.ts;d.w-=e.ts}};function b(h,k,e){if(!h){return 0}var j=h.$n("real"),f=k?"offsetWidth":"offsetHeight",d=j[f];if(e){var i=h.$n("colled"),g=h.$n("split");if(i){d+=i[f]}if(g){d+=g[f]}}return d}var a=zul.layout.Borderlayout=zk.$extends(zul.Widget,{setResize:function(){this.resize()},onChildAdded_:function(e){this.$supers("onChildAdded_",arguments);var d=zul.layout.Borderlayout;switch(e.getPosition()){case d.NORTH:this.north=e;break;case d.SOUTH:this.south=e;break;case d.CENTER:this.center=e;break;case d.WEST:this.west=e;break;case d.EAST:this.east=e;break}this._shallResize=true},onChildRemoved_:function(d){this.$supers("onChildRemoved_",arguments);if(d==this.north){this.north=null}else{if(d==this.south){this.south=null}else{if(d==this.center){this.center=null}else{if(d==this.west){this.west=null}else{if(d==this.east){this.east=null}}}}}if(!this.childReplacing_){this._shallResize=true}},bind_:function(){this.$supers(a,"bind_",arguments);zWatch.listen({onSize:this,onCommandReady:this})},unbind_:function(){zWatch.unlisten({onSize:this,onCommandReady:this});this.$supers(a,"unbind_",arguments)},onCommandReady:function(){if(this._shallResize){this.resize()}},beforeMinFlex_:function(i){var g=this.east,e=this.west,h=this.north,f=this.south,d=this.center;return i=="w"?Math.max(b(h,true),b(f,true),b(g,true,true)+b(e,true,true)+b(d,true)):b(h,false,true)+b(f,false,true)+Math.max(b(g),b(e),b(d))},afterChildrenFlex_:function(){if(this._isOnSize){this._resize(true)}},resize:function(){if(this.desktop){this._resize()}},_resize:function(m){this._shallResize=false;this._isOnSize=m;if(!this.isRealVisible()){return}var h=["north","south","west","east"],i=h.length;for(var n,l=0;l<i;++l){n=this[h[l]];if(n&&zk(n.$n()).isVisible()&&((n._nvflex&&n._vflexsz===undefined)||(n._nhflex&&n._hflexsz===undefined))){return}}var f=this.$n(),e=f.offsetWidth,q=f.offsetHeight,d={x:0,y:0,w:e,h:q};if(zk.opera&&!q&&(!f.style.height||f.style.height=="100%")){var o=f.parentNode;d.h=q=o.offsetHeight}for(var n,p,g,l=0;l<i;++l){n=this[h[l]];if(n&&zk(n.$n()).isVisible()){p=n._ambit();c[h[l]](p,d,e,q);this._resizeWgt(n,p)}}if(this.center&&zk(this.center.$n()).isVisible()){var r=this.center.getCurrentMargins_();d.x+=r.left;d.y+=r.top;d.w-=r.left+r.right;d.h-=r.top+r.bottom;this._resizeWgt(this.center,d)}this._isOnSize=false},_resizeWgt:function(i,d,k){if(i._open){if(!k&&i.$n("split")){i._fixSplit();d=i._reszSplt(d)}zk.copy(i.$n("real").style,{left:jq.px(d.x),top:jq.px(d.y)});this._resizeBody(i,d)}else{i.$n("split").style.display="none";var e=i.$n("colled");if(e){var f=zk(e);zk.copy(e.style,{left:jq.px(d.x),top:jq.px(d.y),width:jq.px0(d.w),height:jq.px0(d.h)})}var j=i.$n("real");if(j&&zk(j).isVisible()){var h=i.$instanceof(zul.layout.South),g=i.$instanceof(zul.layout.East);if(h||i.$instanceof(zul.layout.North)){d.h=j.offsetHeight;if(h){j.style.top=jq.px(d.y-d.h)}}if(g||i.$instanceof(zul.layout.West)){d.w=j.offsetWidth;if(g){j.style.left=jq.px(d.x-d.w)}}this._resizeBody(i,d)}}},_resizeBody:function(k,d){d.w=Math.max(0,d.w);d.h=Math.max(0,d.h);var i=k.$n("real");if(!this._ignoreResize(i,d.w,d.h)){var j=k.isFlex()&&k.getFirstChild(),f=j?k.getFirstChild().$n():k.$n("cave"),g=f.style,h=zk(i);i.style.width=jq.px0(d.w);g.width=jq.px0(h.contentWidth());i.style.height=jq.px0(d.h);if(k.$n("cap")){d.h=Math.max(0,d.h-k.$n("cap").offsetHeight)}if(j){var e;if(e=k.$n("cave")){e.style.height=jq.px0(d.h-h.padBorderHeight())}}g.height=jq.px0(d.h-h.padBorderHeight());if(k._nativebar&&k.isAutoscroll()){g.overflow="auto";g.position="relative"}if(!this._isOnSize){zUtl.fireSized(k)}}},_ignoreResize:function(f,d,e){if(f._lastSize&&f._lastSize.width==d&&f._lastSize.height==e){return true}f._lastSize={width:d,height:e};return false},onSize:function(){this._resize(true)}},{NORTH:"north",SOUTH:"south",EAST:"east",WEST:"west",CENTER:"center"})})();