zul.tab.Tabbox=zk.$extends(zul.Widget,{_orient:"top",_tabscroll:true,_maximalHeight:false,_animating:false,setTabscroll:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_tabscroll",(_zkf=function(){this.rerender()})),getTabscroll:_zkf$=function(){return this._tabscroll},isTabscroll:_zkf$,setOrient:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_orient",(function(a){if(a=="horizontal"){this._orient="top"}else{if(a=="vertical"){this._orient="left"}}this.rerender()})),getOrient:_zkf$=function(){return this._orient},isOrient:_zkf$,setMaximalHeight:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_maximalHeight",(_zkf)),getMaximalHeight:_zkf$=function(){return this._maximalHeight},isMaximalHeight:_zkf$,setPanelSpacing:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_panelSpacing",(_zkf)),getPanelSpacing:_zkf$=function(){return this._panelSpacing},isPanelSpacing:_zkf$,getTabs:function(){return this.tabs},getTabpanels:function(){return this.tabpanels},getToolbar:function(){return this.toolbar},domClass_:function(c){var b=this.$supers("domClass_",arguments);if(!c||!c.zclass){var a=this.inAccordionMold()?this.$s("accordion"):this.$s(this.getOrient());b+=" "+a}return b},isHorizontal:function(){var a=this.getOrient();return"horizontal"==a||"top"==a||"bottom"==a},isTop:function(){var a=this.getOrient();return"horizontal"==a||"top"==a},isBottom:function(){return"bottom"==this.getOrient()},isVertical:function(){var a=this.getOrient();return"vertical"==a||"left"==a||"right"==a},isRight:function(){var a=this.getOrient();return"vertical"==a||"left"==a},isLeft:function(){return"left"==this.getOrient()},inAccordionMold:function(){return this.getMold().indexOf("accordion")!=-1},getSelectedIndex:function(){return this._selTab?this._selTab.getIndex():-1},setSelectedIndex:function(a){if(this.tabs){this.setSelectedTab(this.tabs.getChildAt(a))}},getSelectedPanel:function(){return this._selTab?this._selTab.getLinkedPanel():null},setSelectedPanel:function(a){if(a&&a.getTabbox()!=this){return}var b=a.getLinkedTab();if(b){this.setSelectedTab(b)}},getSelectedTab:function(){return this._selTab},setSelectedTab:function(a){if(this._selTab!=a){if(a){a.setSelected(true)}this._selTab=a}},bind_:function(g,f,e){this.$supers(zul.tab.Tabbox,"bind_",arguments);this._scrolling=false;var d=this.getToolbar();if(this.inAccordionMold()){zWatch.listen({onResponse:this})}else{if(d&&this.getTabs()){zWatch.listen({onResponse:this});this._toolbarWidth=jq(d.$n()).width()}}for(var c,b=["right","left","down","up"],a=b.length;a--;){if(c=this.$n(b[a])){this.domListen_(c,"onClick","_doClick",b[a])}}this._fixMaxHeight()},unbind_:function(){zWatch.unlisten({onResponse:this});for(var c,b=["right","left","down","up"],a=b.length;a--;){if(c=this.$n(b[a])){this.domUnlisten_(c,"onClick","_doClick",b[a])}}this._toolbarWidth=null;this.$supers(zul.tab.Tabbox,"unbind_",arguments)},_doClick:function(p,n){if(!this.tabs||!this.tabs.nChildren){return}var o=this.tabs.$n("cave"),h=jq(o).children(),d=0,a=this,l=this.tabs.$n(),b=a.isVertical(),c=b?l.scrollTop:l.scrollLeft,g=b?l.offsetHeight:l.offsetWidth,k=c+g;switch(n){case"right":for(var f=0,j=h.length;f<j;f++){if(h[f].offsetLeft+h[f].offsetWidth>k){d=h[f].offsetLeft+h[f].offsetWidth-c-g;if(!d||isNaN(d)){return}this.tabs._doScroll("right",d);return}}break;case"left":for(var f=0,j=h.length;f<j;f++){if(h[f].offsetLeft>=c){var m=jq(h[f]).prev("li")[0];if(!m){return}d=c-m.offsetLeft;if(isNaN(d)){return}this.tabs._doScroll("left",d);return}}d=c-h[h.length-1].offsetLeft;if(isNaN(d)){return}this.tabs._doScroll("left",d);break;case"up":for(var f=0,j=h.length;f<j;f++){if(h[f].offsetTop>=c){var e=jq(h[f]).prev("li")[0];if(!e){return}d=c-e.offsetTop;this.tabs._doScroll("up",d);return}}var e=h[h.length-1];if(!e){return}d=c-e.offsetTop;this.tabs._doScroll("up",d);break;case"down":for(var f=0,j=h.length;f<j;f++){if(h[f].offsetTop+h[f].offsetHeight>k){d=h[f].offsetTop+h[f].offsetHeight-c-g;if(!d||isNaN(d)){return}this.tabs._doScroll("down",d);return}}break}},syncSize:function(){this._shallSize=false;if(this.desktop){zUtl.fireSized(this,-1)}},onResponse:function(){if(this.inAccordionMold()){if(this._shallSize){this.syncSize()}}else{if(this._toolbarWidth){var a=jq(this.getToolbar().$n()).width();if(a!=this._toolbarWidth){this._toolbarWidth=a;this.getTabs().onSize()}}}},_syncSize:function(){if(this.desktop){this._shallSize=true}},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.wgt.Toolbar)){this.toolbar=a}else{if(a.$instanceof(zul.tab.Tabs)){this.tabs=a}else{if(a.$instanceof(zul.tab.Tabpanels)){this.tabpanels=a}}}this.rerender()},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.toolbar){this.toolbar=null}else{if(a==this.tabs){this.tabs=null}else{if(a==this.tabpanels){this.tabpanels=null}}}if(!this.childReplacing_){this.rerender()}},setWidth:function(a){this.$supers("setWidth",arguments);if(this.desktop){zUtl.fireSized(this,-1)}},setHeight:function(a){this.$supers("setHeight",arguments);if(this.desktop){zUtl.fireSized(this,-1)}},_fixMaxHeight:function(){var e=this;if(e._maximalHeight){var a=0,g=e.getTabpanels(),f=g.firstChild;for(var h=f;h;h=h.nextSibling){var b=h?h.getCaveNode():null;if(!b){return}else{var d=jq(b).outerHeight();if(d>a){a=d}}}for(var h=f;h;h=h.nextSibling){var b=h.getCaveNode();if(b){b.style.height=jq.px0(a)}}}}});