zul.tab.Tabpanel=zk.$extends(zul.ContainerWidget,{getTabbox:function(){return this.parent?this.parent.parent:null},isVisible:function(){return this.$supers("isVisible",arguments)&&this.isSelected()},setVisible:function(){this.$supers("setVisible",arguments);if(this.desktop&&!this.isSelected()){this.$n().style.display="none"}},domClass_:function(){var a=this.$supers("domClass_",arguments),b=this.getTabbox();if(b.inAccordionMold()){a+=" "+this.$s("content")}return a},getLinkedTab:function(){var b=this.getTabbox();if(!b){return null}var a=b.getTabs();return a?a.getChildAt(this.getIndex()):null},getIndex:function(){return this.getChildIndex()},isSelected:function(){var a=this.getLinkedTab();return a&&a.isSelected()},_changeSel:function(a){if(a){var b=this.$n("cave");if(b&&!b.style.height&&(a=a.$n("cave"))){b.style.height=a.style.height}}},_sel:function(a,f){var d=this.getTabbox();if(!d){return}var c=d.inAccordionMold();if(c&&f){var g=zk(this.$n("cave"));if(a){d._animating=true;g.slideDown(this,{afterAnima:function(){delete d._animating}})}else{g.slideUp(this)}}else{var b=jq(c?this.$n("cave"):this.$n()),e=b.zk.isVisible();if(a){if(!e){b.show();if(zk.ie8||zk.webkit){b.scrollTop(this._lastScrollTop)}zUtl.fireShown(this)}}else{if(e){zWatch.fireDown("onHide",this);if(zk.ie8||zk.webkit){this._lastScrollTop=b.scrollTop()}b.hide()}}}},getPanelContentHeight_:function(){var b=this.$n(),c=this.parent&&this.parent.$n(),a=c&&(c.scrollHeight+zk(c).padBorderHeight());return Math.max(b&&b.offsetHeight,a)},_fixPanelHgh:function(){var a=this.getTabbox(),h=a.$n(),c=h.style.height;if(c&&c!="auto"){if(!a.inAccordionMold()){var b=this.$n(),i=a.isHorizontal();c=i?zk(a).contentHeight()-zk(a.tabs).offsetHeight():zk(a).contentHeight()-zk(b.parentNode).padBorderHeight();b.style.height=jq.px0(c)}else{var b=this.$n(),c=h.offsetHeight,d=zk(b.parentNode);c=c-d.padBorderHeight();for(var f=b.parentNode.firstChild;f;f=f.nextSibling){if(f!=b){c-=f.offsetHeight}}c-=b.firstChild.offsetHeight;var g=this.$n("cave"),j=g.style;j.height=jq.px0(c)}}},onSize:function(){var a=this.getTabbox();if(a.inAccordionMold()&&!zk(this.$n("cave")).isVisible()){return}this._fixPanelHgh()},setVflex:function(a){if(a!="min"){a=false}this.$supers("setVflex",arguments)},setHflex:function(a){if(a!="min"){a=false}this.$supers("setHflex",arguments)},bind_:function(c){this.$supers(zul.tab.Tabpanel,"bind_",arguments);zWatch.listen({onSize:this});var a;if(this.getTabbox().inAccordionMold()&&(a=this.getLinkedTab())){if(!a.$n()){a.unbind().bind(c)}else{if(!jq.isAncestor(this.$n(),a.$n())){var b=this.$n("cave");if(b){b.style.display="none"}}}}},unbind_:function(){zWatch.unlisten({onSize:this});this._lastScrollTop=null;this.$supers(zul.tab.Tabpanel,"unbind_",arguments)}});