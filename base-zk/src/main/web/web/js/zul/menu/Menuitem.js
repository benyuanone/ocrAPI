(function(){function b(d){zWatch.listen({onShow:d});var c;if(c=d._upload){d._uplder=new zul.Upload(d,d._getUploadRef(),c)}}function a(d){var c;if(c=d._uplder){zWatch.unlisten({onShow:d});d._uplder=null;c.destroy()}}(zul.menu.Menuitem=zk.$extends(zul.LabelImageWidget,{_value:"",setCheckmark:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_checkmark",(_zkf=function(){this.rerender()})),getCheckmark:_zkf$=function(){return this._checkmark},isCheckmark:_zkf$,setDisabled:(function(c,d,e){return function(f,g){var h=this[c];this.__fname__=c.substring(1);this[c]=f=d.apply(this,arguments);if(h!==f||(g&&g.force)){e.apply(this,arguments)}delete this.__fname__;return this}})("_disabled",(function(c,d){if(d&&d.adbs){this._adbs=true}else{if(!d||d.adbs===undefined){this._adbs=false}}if(!c){if(this._adbs){this._adbs=false}else{if(d&&d.adbs===false){return this._disabled}}}return c}),(function(c,d){this.rerender(d&&d.skip?-1:0)})),getDisabled:_zkf$=function(){return this._disabled},isDisabled:_zkf$,setHref:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_href",(_zkf)),getHref:_zkf$=function(){return this._href},isHref:_zkf$,setValue:(function(c){return function(d){this[c]=d;return this}})("_value"),getValue:_zkf$=function(){return this._value},isValue:_zkf$,setChecked:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_checked",(function(d){if(d){this._checkmark=d}var e=this.$n();if(e&&!this.isTopmost()&&!this.getImage()){var c=jq(e);c[d?"addClass":"removeClass"](this.$s("checked"));if(this._checkmark){c.addClass(this.$s("checkable"))}}})),getChecked:_zkf$=function(){return this._checked},isChecked:_zkf$,setAutocheck:(function(c){return function(d){this[c]=d;return this}})("_autocheck"),getAutocheck:_zkf$=function(){return this._autocheck},isAutocheck:_zkf$,setTarget:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_target",(function(d){var c=this.$n("a");if(c){if(this.isTopmost()){c=c.parentNode}c.target=this._target}})),getTarget:_zkf$=function(){return this._target},isTarget:_zkf$,setAutodisable:(function(c){return function(d){this[c]=d;return this}})("_autodisable"),getAutodisable:_zkf$=function(){return this._autodisable},isAutodisable:_zkf$,setUpload:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_upload",(function(c){var d=this.$n();if(d){a(this);if(c&&c!="false"){b(this)}}})),getUpload:_zkf$=function(){return this._upload},isUpload:_zkf$,isTopmost:function(){return this._topmost},beforeParentChanged_:function(c){this._topmost=c&&!(c.$instanceof(zul.menu.Menupopup));this.$supers("beforeParentChanged_",arguments)},domClass_:function(e){var d=this.$supers("domClass_",arguments);if(!e||!e.zclass){var c=this.isDisabled()?this.$s("disabled"):"";if(c){d+=(d?" ":"")+c}c=(!this.getImage()&&this.isCheckmark())?this.$s("checkable")+(this.isChecked()?" "+this.$s("checked"):""):"";if(c){d+=(d?" ":"")+c}}return d},domContent_:function(){var e='<span class="'+this.$s("text")+'">'+(zUtl.encodeXML(this.getLabel()))+"</span>",f='<i class="'+this.$s("icon")+' z-icon-check"></i>',c=this.getImage(),d=this.domIcon_();if(c){c='<img src="'+c+'" class="'+this.$s("image")+'" align="absmiddle" />'+(d?" "+d:"")}else{if(d){c=d}else{c="<img "+(this.isTopmost()?'style="display:none"':"")+' src="data:image/png;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="'+this.$s("image")+'" align="absmiddle" />'}}return c+(this.isAutocheck()||this.isCheckmark()?f:"")+" "+e},getMenubar:function(){for(var c=this.parent;c;c=c.parent){if(c.$instanceof(zul.menu.Menubar)){return c}}return null},bind_:function(){this.$supers(zul.menu.Menuitem,"bind_",arguments);if(!this.isDisabled()){var c=this.$n("a");if(this.isTopmost()){this.domListen_(c,"onFocus","doFocus_").domListen_(c,"onBlur","doBlur_")}this.domListen_(c,"onMouseEnter");if(this._upload){b(this)}}},unbind_:function(){if(!this.isDisabled()){if(this._upload){a(this)}var c=this.$n("a");if(this.isTopmost()){this.domUnlisten_(c,"onFocus","doFocus_").domUnlisten_(c,"onBlur","doBlur_")}this.domUnlisten_(c,"onMouseEnter")}this.$supers(zul.menu.Menuitem,"unbind_",arguments)},doClick_:function(d){if(this._disabled){d.stop()}else{if(!this._canActivate(d)){return}if(!this._upload){zul.wgt.ADBS.autodisable(this)}else{if(!zk.ie||zk.ie>10){this._uplder.openFileDialog()}}var e=this.isTopmost(),g=this.$n("a");if(g.href.startsWith("javascript:")){if(this.isAutocheck()){this.setChecked(!this.isChecked());this.fire("onCheck",this.isChecked())}this.fireX(d)}else{if(g.href.toLowerCase().startsWith("mailto:")){var c=jq.newFrame("mailtoFrame",g.href,null);jq(c).remove();d.stop()}else{if(zk.ie<11&&e&&this.$n().id!=g.id){zUtl.go(g.href,{target:g.target})}if(zk.gecko&&e&&this.$n().id!=g.id){zUtl.go(g.href,{target:g.target});d.stop()}}}if(!e){for(var h=this.parent;h;h=h.parent){if(h.$instanceof(zul.menu.Menupopup)){if(!h.isOpen()||this._uplder){break}this._updateHoverImage();h.close({sendOnOpen:true})}else{if(!h.$instanceof(zul.menu.Menu)){break}else{h._updateHoverImage()}}}}var f;if(zk.webkit&&(f=this.getMenubar())&&f._autodrop){f._noFloatUp=true}this.$super("doClick_",d,true)}},_canActivate:function(c){return !this.isDisabled()&&(!zk.ie<11||!this.isTopmost()||this._uplder||jq.isAncestor(this.$n("a"),c.domTarget))},_getUploadRef:function(){return this.isTopmost()?this.$n():this.$n("a")},_doMouseEnter:function(c){if(zul.menu._nOpen||this.isTopmost()){zWatch.fire("onFloatUp",this)}},deferRedrawHTML_:function(d){var c=this.isTopmost()?"td":"li";d.push("<",c,this.domAttrs_({domClass:1}),' class="z-renderdefer"></',c,">")},getImageNode:function(){if(!this._eimg&&(this._image||this._hoverImage)){var c=this.$n();if(c){this._eimg=this.$n("a").firstChild}}return this._eimg}},{_isActive:function(c){return jq(c.$n()).hasClass(c.$s("hover"))},_addActive:function(d){var c=d.isTopmost();jq(d.$n()).addClass(d.$s("hover"));if(!c&&d.parent.parent.$instanceof(zul.menu.Menu)){this._addActive(d.parent.parent)}},_rmActive:function(c){return jq(c.$n()).removeClass(c.$s("hover"))}})).prototype.onShow=function(){if(this._uplder){this._uplder.sync()}}})();