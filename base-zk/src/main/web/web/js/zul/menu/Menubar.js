(function(){function a(b){if(!b._noFloatUp&&!b._bOver&&zul.menu._nOpen){zWatch.fire("onFloatUp",b)}}zul.menu.Menubar=zk.$extends(zul.Widget,{_orient:"horizontal",setOrient:(function(b,c){return function(d,e){var f=this[b];this[b]=d;if(f!==d||(e&&e.force)){this.__fname__=b.substring(1);c.apply(this,arguments);delete this.__fname__}return this}})("_orient",(function(){this.rerender()})),getOrient:_zkf$=function(){return this._orient},isOrient:_zkf$,setScrollable:(function(b,c){return function(d,e){var f=this[b];this[b]=d;if(f!==d||(e&&e.force)){this.__fname__=b.substring(1);c.apply(this,arguments);delete this.__fname__}return this}})("_scrollable",(function(b){if(this.checkScrollable()){this.rerender()}})),getScrollable:_zkf$=function(){return this._scrollable},isScrollable:_zkf$,setAutodrop:(function(b){return function(c){this[b]=c;return this}})("_autodrop"),getAutodrop:_zkf$=function(){return this._autodrop},isAutodrop:_zkf$,setWidth:function(){this.$supers("setWidth",arguments);this._checkScrolling()},domClass_:function(c){var b=this.$supers("domClass_",arguments);if(!c||!c.zclass){b+=" "+this.$s("vertical"==this.getOrient()?"vertical":"horizontal")}return b},unbind_:function(){if(this.checkScrollable()){var c=this.$n("left"),b=this.$n("right");if(c&&b){this.domUnlisten_(c,"onClick","_doScroll").domUnlisten_(b,"onClick","_doScroll")}zWatch.unlisten({onSize:this})}var d=this.$n();this.domUnlisten_(d,"onMouseEnter").domUnlisten_(d,"onMouseLeave");this._lastTarget=null;this.$supers(zul.menu.Menubar,"unbind_",arguments)},bind_:function(){this.$supers(zul.menu.Menubar,"bind_",arguments);var d=this.$n();this.domListen_(d,"onMouseEnter").domListen_(d,"onMouseLeave");if(this.checkScrollable()){var c=this.$n("left"),b=this.$n("right");if(c&&b){this.domListen_(c,"onClick","_doScroll").domListen_(b,"onClick","_doScroll")}zWatch.listen({onSize:this})}},checkScrollable:function(){return this._scrollable&&("horizontal"==this.getOrient())},onSize:function(){this._checkScrolling()},onChildAdded_:function(b){this.$supers("onChildAdded_",arguments);this._checkScrolling()},onChildRemoved_:function(b){this.$supers("onChildRemoved_",arguments);if(!this.childReplacing_){this._checkScrolling()}},_checkScrolling:function(){if(!this.checkScrollable()){return}var g=this.$n();if(!g){return}jq(g).addClass(this.$s("scroll"));var d=zk(g).offsetWidth(),c=this.$n("body"),h=jq(this.$n("cave")).children(),b=0;for(var e=h.length;e--;){b+=h[e].offsetWidth}if(zk.ie){b+=h.length}var f=d-zk(this.$n("left")).offsetWidth()-zk(this.$n("right")).offsetWidth();if(this._scrolling){if(b<d){this._scrolling=false;c.scrollLeft=0;if(c.offsetWidth<=b){c.style.width=jq.px0(f)}}else{c.style.width=jq.px0(f);this._fixScrollPos(g)}}else{if(b>=d){this._scrolling=true;c.style.width=jq.px0(f)}}this._fixButtonPos(g)},_fixScrollPos:function(){var b=this.$n("body"),d=jq(this.$n("cave")).children();if(d[d.length-1].offsetLeft<b.scrollLeft){var c=d[d.length-1].offsetLeft;b.scrollLeft=c}},_fixButtonPos:function(e){var g=this.getZclass(),b=this.$n("body"),f=this.$n("left"),d=this.$n("right"),c=this._scrolling?"addClass":"removeClass";b.style.marginLeft=this._scrolling?jq.px(f.offsetWidth):"0";b.style.marginRight=this._scrolling?jq.px(d.offsetWidth):"0";f.style.display=d.style.display=this._scrolling?"block":"none";jq(e)[c](this.$s("scroll"))},_forceStyle:function(b,c){if(zk.parseInt(c)<0){return}b.style.width=c},_doMouseEnter:function(b){this._bOver=true;this._noFloatUp=false},_doMouseLeave:function(b){this._bOver=false;this._closeOnOut()},_doScroll:function(b){this._scroll(b.domTarget==this.$n("left")||b.domTarget.parentNode==this.$n("left")?"left":"right")},_scroll:function(k){if(!this.checkScrollable()||this._runId){return}var m=this,f=this.$n("body"),d=f.scrollLeft,g=jq(this.$n("cave")).children(),l=g.length,c=0;if(!l){return}switch(k){case"left":for(var e=0;e<l;e++){if(g[e].offsetLeft>=d||g[e].offsetLeft+(g[e].offsetWidth-f.offsetWidth)>=d){var h=g[e].previousSibling;if(!h){return}c=d-(d-h.offsetLeft);if(isNaN(c)){return}m._runId=setInterval(function(){if(!m._moveTo(f,c)){clearInterval(m._runId);m._runId=null}},10);return}}break;case"right":var b=d+f.offsetWidth;for(var e=0;e<l;e++){var j=g[e].offsetLeft+g[e].offsetWidth;if(j>b){c=d+(j-b);if(isNaN(c)){return}m._runId=setInterval(function(){if(!m._moveTo(f,c)){clearInterval(m._runId);m._runId=null}},10);return}}break}},_moveTo:function(b,d){var f=b.scrollLeft;if(f==d){return false}var e=5,g=f>d?-e:e,c=f+g;if((c<d&&g<0)||(c>d&&g>0)){c=d}b.scrollLeft=c;return true},insertChildHTML_:function(e,c,d){var b="vertical"==this.getOrient();if(c){jq(c.$n("chdextr")||c.$n()).before(this.encloseChildHTML_({child:e,vertical:b}))}else{jq(this.$n("cave")).append(this.encloseChildHTML_({child:e,vertical:b}))}e.bind(d)},removeChildHTML_:function(b){this.$supers("removeChildHTML_",arguments);jq(b.$n("chdextr")).remove()},encloseChildHTML_:function(c){var b=c.out||[],d=c.child;d.redraw(b);if(!c.out){return b.join("")}},_closeOnOut:function(){var b=this;if(b._autodrop&&!zul.Widget.getOpenTooltip()){setTimeout(function(){a(b)},200)}}})})();