zul.inp.SimpleDateConstraint=zk.$extends(zul.inp.SimpleConstraint,{$init:function(b,c){this.$super("$init",b);this._localizedSymbols=c._localizedSymbols},format:"yyyyMMdd",parseConstraint_:function(c){var a=this.format.length+1;if(c.startsWith("between")){var b=c.indexOf("and",7);if(b<0&&zk.debugJS){zk.error("Unknown constraint: "+c)}this._beg=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(7,b),this.format);this._end=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(b+3,b+3+a),this.format);if(this._beg.getTime()>this._end.getTime()){var e=this._beg;this._beg=this._end;this._end=e}this._beg.setHours(0,0,0,0);this._end.setHours(0,0,0,0);return}else{if(c.startsWith("before")&&!c.startsWith("before_")){this._end=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(6,6+a),this.format);this._end.setHours(0,0,0,0);return}else{if(c.startsWith("after")&&!c.startsWith("after_")){this._beg=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(5,5+a),this.format);this._beg.setHours(0,0,0,0);return}}}return this.$supers("parseConstraint_",arguments)},validate:function(d,c){if(jq.type(c)=="date"){var b=this._errmsg;var a=new Date(c.getFullYear(),c.getMonth(),c.getDate());if(this._beg!=null&&this._beg.getTime()>a.getTime()){return b||this.outOfRangeValue()}if(this._end!=null&&this._end.getTime()<a.getTime()){return b||this.outOfRangeValue()}}return this.$supers("validate",arguments)},outOfRangeValue:function(){return msgzul.OUT_OF_RANGE+": "+(this._beg!=null?this._end!=null?new zk.fmt.Calendar(null,this._localizedSymbols).formatDate(this._beg,this.format)+" ~ "+new zk.fmt.Calendar().formatDate(this._end,this.format):">= "+new zk.fmt.Calendar().formatDate(this._beg,this.format):"<= "+new zk.fmt.Calendar().formatDate(this._end,this.format))}});