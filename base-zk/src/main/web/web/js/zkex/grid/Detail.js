zkex.grid.Detail=zk.$extends(zul.Widget,{setOpen:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_open",(function(){this.open(this._open,true)})),getOpen:_zkf$=function(){return this._open},isOpen:_zkf$,setContentStyle:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_contentStyle",(function(){var a=this.$n("cave");if(a){a.cssText=this._contentStyle||""}})),getContentStyle:_zkf$=function(){return this._contentStyle},isContentStyle:_zkf$,setContentSclass:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_contentSclass",(function(){var a=this.$n("cave");if(a){a.className=this._contentSclass||""}})),getContentSclass:_zkf$=function(){return this._contentSclass},isContentSclass:_zkf$,onShow:function(){if(this._open){if(!jq(this.$n("icon")).hasClass(this.getIconOpenClass_())){this.open(this._open,true)}}},bind_:function(){this.$supers(zkex.grid.Detail,"bind_",arguments);this.parent.listen("onStripe",this);if(this._open&&zk(this).isRealVisible()){this.open(this._open,true)}zWatch.listen({onShow:this});var a=this.$n();if(a){this.domListen_(a,zk.mobile?"onTouchstart":"onClick","_doClick")}},unbind_:function(){var a=this.$n();if(a){this.domUnlisten_(a,zk.mobile?"onTouchstart":"onClick","_doClick")}this.parent.unlisten("onStripe",this);if(this._open){this.open(false,true)}zWatch.unlisten({onShow:this});this.$supers(zkex.grid.Detail,"unbind_",arguments)},onStripe:function(b){if(this._open){var a=this.$n("fake");a.className=this.parent.$n().className+" "+this.$s("faker")}},doMouseOver_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b=b.parent;if(b){b.doMouseOver_(a)}}}},_doClick:function(){this.open((this._open=!this._open))},open:function(h,j){var e=this.$n();if(e){var m=this.$n("cave"),g=this.$n("chdextr"),k=g.parentNode,r=this.parent,a=r?r.getGrid():null,b=a?a.ebodytbl:null,d=b?b.clientWidth:0,l=this.$n("icon"),f=this.getIconOpenClass_(),c=this.getIconCloseClass_();if(h){jq(g).removeClass("z-detail-close").addClass("z-detail-open");jq(l).removeClass(c).addClass(f);var p=k.parentNode.insertRow(k.rowIndex-k.parentNode.rows[0].rowIndex+1),o=p.insertCell(0),q=r?r.getZclass():k.className,i=a.getOddRowSclass();if(r&&k.className.indexOf(i)>=0){q+=" "+i}p.id=this.uuid+"-fake";o.colSpan=zk(k).ncols(true)-1;jq(p).addClass(q);jq(o).addClass(this.$s("inner"));jq(m).addClass(this.$s("content"));g.rowSpan=2;o.appendChild(m);o.style.display=jq(g).is(":visible")?"":"none";m.style.display="";zUtl.fireShown(this)}else{jq(g).removeClass("z-detail-open").addClass("z-detail-close");jq(l).removeClass(f).addClass(c);var p=this.$n("fake");m.style.display="none";e.appendChild(m);g.rowSpan=1;jq(p).remove();this.clearCache()}if(!j){this.fire("onOpen",{open:h})}if(b){a._fixhdwcnt=a._fixhdwcnt||0;if(!a._fixhdwcnt++){a._fixhdoldwd=d}setTimeout(function(){if(!--a._fixhdwcnt&&a._fixhdoldwd!=b.clientWidth){a._calcSize()}},250)}if(!zk.mobile){setTimeout(function(){a.refreshBar_(true,false)},400)}}},getIconOpenClass_:function(){return"z-icon-angle-down"},getIconCloseClass_:function(){return"z-icon-angle-right"}});