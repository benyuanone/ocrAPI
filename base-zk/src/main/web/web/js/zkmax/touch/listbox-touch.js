(function(){var a={};zk.override(zul.sel.Listbox.prototype,a,{onResponse:function(b,c){a.onResponse.apply(this,arguments);if(!this._listbox$rod){this.refreshBar_()}},doResizeScroll_:function(){this.$supers("doResizeScroll_",arguments);if(this.ebody){this.ebody.scrollTop=0}this.refreshBar_()},_syncFocus:function(){if(!this._listbox$rod){this._shallScrollIntoView=true}},_syncSelInView:function(){if(this._listbox$rod){return}a._syncSelInView.apply(this,arguments)},_initPadSizes:function(){if(this.inPagingMold()){return}if(this._justScrollPads){delete this._justScrollPads;return}var h=this.$n("rows");if(!h){return}var i=this._nrows,o=this._rowshgh=h.offsetHeight,q=this._totalSize,n=this.ebody,c=this.$n("cave"),m=this._scrollbar;this._avgrowhgh=i>0?((o/i)|0):21;this._ibottom=this._offset+i;if(this._topPad<0){this._topPad=this._offset*this._avgrowhgh}if(this._offset==0){this._topPad=0}var b=this._topPad,k=q*this._avgrowhgh-o-b;if(k<0){if(this._offset>0){b+=k}k=0;if(b<0){b=0}}else{if(this.tsize<=this._ibottom){k=0}}if(this._topPad!=b){this.fire("onTopPad",{topPad:this._topPad=b})}this._setPadSize(this.$n("tpad"),"tpad",b);this._setPadSize(this.$n("bpad"),"bpad",k);this._totalhgh=this.ebody.scrollHeight;this._itop=this._offset;var r=n.offsetHeight;this._limit=(((r+this._bufpad*2)/this._avgrowhgh)|0)+2;if(!this._viewtop&&!this._lasttop&&this._currentTop>0){this._viewtop=this._lasttop=this._currentTop;jq(c).offset().top=jq(n).offset().top-this._viewtop}if(!this._lastoffset&&this._offset>0){this._lastoffset=this._offset}if(this._totalSize>this._ibottom){jq(c).offset().top=jq(n).offset().top-this._currentTop;var g=this._viewtop=zul.mesh.Scrollbar.getScrollPosV(this),j=g+r,e=h.lastChild,p=e?this._rowScrollBottom(e):b;if(j>p&&this._lastoffset==this._itop){this.fire("onDataLoading",{offset:this._itop,limit:this._limit})}}this.refreshBar_();if(this._selInView){var d=this._selInView*this._avgrowhgh,l=d+this._avgrowhgh,f=zul.mesh.Scrollbar.getScrollPosV(this);if(l<f||d>(f+this.ebody.offsetHeight)){this.setSelInView_(this._selInView)}delete this._selInView}},refreshBar_:function(){var c=this._scrollbar;if(c){var b=this._currentLeft,d=this._currentTop;c.refresh();if((b>0||d>0)&&(-c.maxScrollX>b||-c.maxScrollY>d)){c.scrollTo(-b,-d,0)}}this._afterCalcSize()},setSelInView_:function(b){var c=this._scrollbar,d=b*this._avgrowhgh;if(c){c.scrollTo(c.x,-d,0)}}})})();