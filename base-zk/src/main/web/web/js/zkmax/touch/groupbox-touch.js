(function(){function b(f){for(var d=f.firstChild,e=f.caption;d;d=d.nextSibling){if(d!=e){return d}}}function c(f){if(f._rodKid&&(!f.parent||!f.parent.z_rod)){delete f._rodKid;f._rodopen=true;var e=[];f._redrawCave(e);jq("#"+f.uuid+"-cave").replaceWith(e.join(""));for(var d=b(f);d;d=d.nextSibling){d.unbind();if(!d._visible&&zkmax.rod(d)){d.z_rod=true}d.bind(f.desktop)}f.clearCache()}}var a={};zk.override(zul.wgt.Groupbox.prototype,a,{_scrollbar:null,_mold:"3d",bind_:function(){a.bind_.apply(this,arguments);var d=jq(this.$n("cave")).css("overflow");if(d.indexOf("auto")>-1||d.indexOf("scroll")>-1){this._scrollbar=new iScroll(this.$n("cave2"),{hideScrollbar:true,bounce:false})}},unbind_:function(){var d=this._scrollbar;if(d){d.destroy();d=this._scrollbar=null}a.unbind_.apply(this,arguments)},doResizeScroll_:function(){this.$supers("doResizeScroll_",arguments);this._refresh(false)},onSize:function(){a.onSize.apply(this,arguments);var d=this;if(d.isRealVisible()&&d.$n("cave").style.height){d.$n("cave2").style.height="100%"}d._refresh(true)},_refresh:function(e){var i=this._scrollbar;if(i){var j=this.$n("cave2"),d=j.parentNode,h=j.style,f=zk(d),l=zk(j),g=f.revisedHeight(d.offsetHeight),k=f.revisedWidth(d.offsetWidth);h.height="";h.width="";if(j.offsetHeight&&j.offsetWidth){}h.height=jq.px(j.scrollHeight>g?j.scrollHeight:l.revisedHeight(g));h.width=jq.px(j.scrollWidth>k?j.scrollWidth:l.revisedWidth(k));i.refresh();if(e){i.scrollTo(0,0,0)}}},setOpen:function(e,d){if(e){c(this)}var f=this.$n();if(f&&this._closable){if(e&&this._isDefault()){jq(f).removeClass(this.$s("collapsed"))}var g=this;zk(this.$n("cave")||this.$n())[e?"slideDown":"slideUp"](this);if(!d){this.fire("onOpen",{open:e})}}this._open=e},afterAnima_:function(e){a.afterAnima_.apply(this,arguments);var d=this.parent;if(d){d.doResizeScroll_()}},getCaveNode:function(){return this.$n("cave2")||this.$n()},_redrawCave:function(e,h){var d,g=this.uuid;if(this._rodopen){delete this._rodopen}else{if((d=b(this))&&!this._open&&zkmax.rod(this)){e.push('<div id="',g,'-cave"');if(!this._isDefault()){e.push(' style="display:none;border:1px solid"')}e.push('><div id="',g,'-cave2"></div></div>');for(;d;d=d.nextSibling){if(d!=this.caption){d.z_rod=true}}this._rodKid=true;return}}e.push('<div id="',g,'-cave"',this._contentAttrs(),'><div id="',g,'-cave2">');if(!h){for(var d=this.firstChild,f=this.caption;d;d=d.nextSibling){if(d!=f){d.redraw(e)}}}e.push("</div></div>")}})})();