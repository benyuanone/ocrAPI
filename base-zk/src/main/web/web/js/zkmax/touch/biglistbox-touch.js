(function(){var h={},m,a,f,d,c,g,b,l,k=["SELECT","INPUT","TEXTAREA","BUTTON"];function i(u){l=false;var o=u.target;while(o.nodeType!=1){o=o.parentNode}if(jq.inArray(o.tagName,k)<0){var n=zk.currentFocus;if(n&&n.$instanceof&&zk.isLoaded("zul.inp")&&n.$instanceof(zul.inp.InputWidget)){n.getInputNode().blur()}u.preventDefault()}var s=u.originalEvent,q=s.touches?s.touches[0]:s,v=zk.Widget.$(u),r=v.$n("body-cnt"),p=v.$n("load-hor"),t=v.$n("load-ver");p.style.height=jq.px(r.offsetHeight);t.style.width=jq.px(r.offsetWidth);a=[q.pageX,q.pageY];c=u.timeStamp||jq.now();jq(r).bind("touchmove",e).bind("touchend",j)}function e(B){B.stopPropagation();l=true;var u=B.target;while(u.nodeType!=1){u=u.parentNode}var G=u.tagName;if(G=="TEXTAREA"&&u.scrollHeight>=u.offsetHeight){return}var z=zk.Widget.$(B),C=B.timeStamp||jq.now(),E=B.originalEvent,F=E.touches?E.touches[0]:E,s=F.pageX-a[0],r=F.pageY-a[1],p=Math.abs(s),o=Math.abs(r);if(z.isListen("onSwipe")&&(C-c<z._swipeTimeThreshold)){return}if(p<6&&o<6){return}f=[F.pageX,F.pageY];var A=z.$n("body-cnt");if(p>o+5){if(z.colSize<=z._getVisibleCols()){return}if(b){return}g=true;var t=z.$n("head-cnt"),x=z.$n("load-hor"),H=z.$n("image-hor"),w=x.style,v=z.$n("count-hor"),D=Math.round(p/zk.parseInt(z._colWidth)),y=z.colSize-z._getVisibleCols()-z._currentX,q=z.$s("load-image-left"),n=z.$s("load-image-right");d="horizontal";if(t){t.style.WebkitTransform="translate3d("+s+"px, 0, 0)"}A.style.WebkitTransform="translate3d("+s+"px, 0, 0)";jq(H).removeClass(s>=0?n:q).addClass(s>=0?q:n);w.width=jq.px(H.offsetWidth);w.height="auto";w.display="block";w.WebkitTransform="translate3d("+(s<0?A.parentNode.offsetWidth-x.offsetWidth-15:15)+"px, "+(A.offsetHeight-x.offsetHeight)/2+"px, 0)";if(D>z._currentX&&s>=0){D=z._currentX}if(D>=y&&s<=0){D=y}v.innerHTML="("+D+")"}else{if(o>p+5){if(z.rowSize<=z._getVisibleRows()){return}if(g){return}b=true;var x=z.$n("load-ver"),v=z.$n("count-ver"),H=z.$n("image-ver"),w=x.style,D=Math.round(o/zk.parseInt(z._rowHeight));y=z.rowSize-z._getVisibleRows()-z._currentY,ucls=z.$s("load-image-up"),dcls=z.$s("load-image-down");d="vertical";A.style.WebkitTransform="translate3d(0, "+r+"px, 0)";jq(H).removeClass(r>=0?dcls:ucls).addClass(r>=0?ucls:dcls);H.style.display="table-cell";v.style.display="table-cell";w.width="auto";w.height=jq.px(H.offsetHeight);w.display="table-row";w.WebkitTransform="translate3d("+(A.offsetWidth-x.offsetWidth)/2+"px, "+(r<0?A.parentNode.offsetHeight-x.offsetHeight-5:5)+"px, 0)";if(D>z._currentY&&r>=0){D=z._currentY}if(D>=y&&r<=0){D=y}v.innerHTML="("+D+")"}}}function j(v){v.stopPropagation();var n=(new Date()).getTime()-c,x=zk.Widget.$(v),p=x.$n("body-cnt");jq(p).unbind("touchmove",e).unbind("touchend",j);g=b=false;x.$n("load-hor").style.display="none";x.$n("load-ver").style.display="none";if(a&&f&&d&&n>=200){if(d=="horizontal"){var o=x.$n("image-hor");jq(o).removeClass(x.$s("load-image-left"));jq(o).removeClass(x.$s("load-image-right"));var s=x.$n("head-cnt"),w=x.colSize,t=Math.round((a[0]-f[0])/zk.parseInt(x._colWidth))+x._currentX;if(t>=w-x._getVisibleCols()){t=w-x._cols}else{if(t<0){t=0}}if(s){s.style.WebkitTransform=""}x._doScrollX(t);x._vbar.syncSize({startStep:x._currentX})}else{var o=x.$n("image-ver");jq(o).removeClass(x.$s("load-image-up"));jq(o).removeClass(x.$s("load-image-down"));var r=x.rowSize,t=Math.round((a[1]-f[1])/zk.parseInt(x._rowHeight))+x._currentY;if(t>=r-x._getVisibleRows()){t=r-x._rows}else{if(t<0){t=0}}x._doScrollY(t);x._vbar.syncSize({startStep:x._currentY})}p.style.WebkitTransform="";a=f=d=null}if(!l){var u=v,q=u.target;while(q.nodeType!=1){q=q.parentNode}if(jq.inArray(q.tagName,k)<0){ev=document.createEvent("MouseEvents");ev.initMouseEvent("click",true,true,v.view,1,u.screenX,u.screenY,u.clientX,u.clientY,v.ctrlKey,v.altKey,v.shiftKey,v.metaKey,0,null);ev._fake=true;q.dispatchEvent(ev)}}}zk.override(zkmax.big.Biglistbox.prototype,h,{_deceleration:0.0002,_swipeTimeThreshold:200,bind_:function(){h.bind_.apply(this,arguments);var o=this.$n("head-cnt"),n=this.$n("body-cnt");if(o){o.style.WebkitTransform="translate3d(0, 0, 0)"}if(n){n.style.WebkitTransform="translate3d(0, 0, 0)";this.$n("load-ver").style.WebkitTransform="translate3d(0, 0, 0)";this.$n("load-hor").style.WebkitTransform="translate3d(0, 0, 0)";jq(n).bind("touchstart",i)}},unbind_:function(){h.unbind_.apply(this,arguments);var n=this.$n("body-cnt");if(n){jq(n).unbind("touchstart",i)}},doSwipe_:function(A){var n=A.opts,p=n.start,y=n.stop,s=y.time-p.time,u=p.coords[0]-y.coords[0],t=p.coords[1]-y.coords[1],q=Math.abs(u),o=Math.abs(t);if(s>this._swipeTimeThreshold){return}if(o>10&&q<75){n.dir=t>0?"up":"down";var r=o/s,z=(r*r)/(2*this._deceleration),z=t>0?z:-z,x=this.rowSize,v=x>10000?Math.round(z):Math.round(z/zk.parseInt(this._rowHeight)),w=v+this._currentY;if(w>x){w=x-this._rows}else{if(w<0){w=0}}this._doScrollY(w);this._vbar.syncSize({startStep:this._currentY})}else{if(q>10&&o<75){n.dir=u>0?"left":"right";var r=q/s,z=(r*r)/(2*this._deceleration),z=u>0?z:-z,B=this.rowSize,v=B>10000?z:Math.round(z/zk.parseInt(this._colWidth)),w=v+this._currentX;if(w>B){w=B-this._cols}else{if(w<0){w=0}}this._doScrollX(w);this._hbar.syncSize({startStep:this._currentX})}}this.$n("body-cnt").style.WebkitTransform="translate3d(0, 0, 0)";if(this.isListen("onSwipe",{asapOnly:true})){A.stop()}this.$supers("doSwipe_",arguments)},_doSelectMouseOverEvt:zk.$void,_doSelectMouseOutEvt:zk.$void,_doSortMouseEvt:zk.$void,redraw:function(u){var p=this.uuid,r=this._colData||[],s=this._rowData||[],z=this._frozenCols,v=zk.parseInt(this._colWidth),B=zk.ie<11||zk.gecko?"a":"button",w=this._getVisibleCols(),A=this._getVisibleRows(),o=zk.parseInt(this._rowHeight);u.push("<div ",this.domAttrs_(),'><div class="',this.$s("outer"),'">');if(r.length){u.push('<div id="',p,'-head" class="',this.$s("head-outer"),'">');var y=this.$s("head");if(z){u.push('<div id="',p,'-headfx" class="',y," ",this.$s("head-frozen"),'" style="width:',z*v,'px"><table width="100%" style="table-layout:fixed;width:',z*v,'px">');this._renderFrozenFaker(u,"hdfkfx");this._renderFrozenCols(u).push('</table></div><div id="',p,'-bodyshim" class="',this.$s("head-shim"),'"></div>')}u.push('<div id="',p,'-head-cnt" class="',y,'">','<table width="100%" style="table-layout:fixed;width:',w*v,'px">');this._renderFaker(u,"hdfk");this._renderCols(u).push("</table></div>");u.push('<div class="z-clear"></div></div>')}u.push('<div id="',p,'-body" class="',this.$s("body-outer"),'">');var n=this.$s("body");if(z){u.push('<div id="',p,'-bodyfx" class="',n," ",this.$s("body-frozen"),'" style="width:',z*v,'px"><table width="100%" style="table-layout:fixed;width:',z*v,'px">');this._renderFrozenFaker(u,"bdfkfx");this._renderFrozenRows(u).push('</table></div><div id="',p,'-bodyshim" class="',this.$s("body-shim"),'"></div>')}if(s.length){var q=this.$s("load"),x=this.$s("load-image"),t=this.$s("load-count");u.push('<div id="',p,'-load-ver" class="',q,'">','<div id="',p,'-image-ver" class="',x,'"></div><span id="',p,'-count-ver" class="',t,'"></span></div>','<div id="',p,'-load-hor" class="',q,'">','<div id="',p,'-image-hor" class="',x,'"></div><span id="',p,'-count-hor" class="',t,'"></span></div>','<div id="',p,'-body-cnt" class="',n,'">','<table width="100%" style="table-layout:fixed;width:',w*v,'px">');this._renderFaker(u,"bdfk");this._renderRows(u).push("</table></div>")}u.push('<div class="z-clear"></div></div>');u.push("<",B,' id="',p,'-a" style="top:0px;left:0px"',' onclick="return false;" href="javascript:;" class="z-focus-a"></',B,"></div>");if(z){u.push('<div id="',p,'-vbarfx" style="left:',z*v,'px" class="',this.$s("verticalbar-frozen"),'"></div>');u.push('<div id="',p,'-vbartick" class="',this.$s("verticalbar-tick"),'"></div>')}u.push("</div>")}})})();