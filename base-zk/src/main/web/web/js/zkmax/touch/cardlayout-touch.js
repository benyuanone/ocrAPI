(function(){var b={};function a(d,e){return d.$n(e.uuid+"-chdex")}function c(f,g,d){var h=f.$n(),e=a(f,g);if(f.isHorizontal()){e.style.left=d*h.offsetWidth+"px"}else{e.style.top=d*h.offsetHeight+"px"}}zk.override(zkmax.layout.Cardlayout.prototype,b,{bindSwipe_:function(){var g=this.$n().offsetWidth,e=this.$n().offsetHeight,f=this.isHorizontal()?g/3:e/3,d=this.isHorizontal()?g/2:e/2;if(f<this.$class.minSwipeLowerBound){f=this.$class.minSwipeLowerBound}if(f>this.$class.minSwipeUpperBound){f=this.$class.minSwipeUpperBound}if(d<this.$class.maxSwipeLowerBound){d=this.$class.maxSwipeLowerBound}var h=this.$n();if(this.isListen("onSwipe")||jq(h).data("swipeable")){opts={scrollThreshold:1,minDisplacement:f,maxDisplacement:d};this._swipe=new zk.Swipe(this,h,opts)}},unbindSwipe_:function(){var d=this._swipe;if(d){d.destroy(this.$n())}},doSwipe_:function(m){var f=m.opts.dir,l=this.isHorizontal(),g=this._selectedIndex;if(!f&&this.getChildAt(g).$instanceof(this.$class.ignoreClass)){var j=m.opts.start.coords[0]-m.opts.stop.coords[0],h=m.opts.start.coords[1]-m.opts.stop.coords[1],e=m.dispX,d=m.dispY,i=30,k=75;if(e>i&&d<k){f=j>0?"left":"right"}else{if(d>i&&e<k){f=h>0?"up":"down"}}}switch(f){case"left":if(l&&g!=this.nChildren-1){this.setSelectedIndex(g+1)}break;case"right":if(l&&g!=0){this.setSelectedIndex(g-1)}break;case"up":if(!l&&g!=this.nChildren-1){this.setSelectedIndex(g+1)}break;case"down":if(!l&&g!=0){this.setSelectedIndex(g-1)}break}this.fire("onChange",{selectedIndex:this._selectedIndex});this.$supers("doSwipe_",arguments)},_animateShift:function(g,d){var f=this.isHorizontal(),j=-g*(f?this.$n().offsetWidth:this.$n().offsetHeight);for(var i=this.firstChild;i;i=i.nextSibling){var e=this.$n(i.uuid+"-chdex"),h=zk(e).getAnimationSpeed(500);e.style.WebkitTransition=d?"":("-webkit-transform "+h+"ms ease-in-out");if(f){e.style.WebkitTransform="translate3d("+j+"px, 0, 0)"}else{e.style.WebkitTransform="translate3d(0, "+j+"px, 0)"}}},onSize:function(){var d=this._selectedIndex;this._animateShift(d,true);for(var e=this.firstChild;e;e=e.nextSibling){c(this,e,e.getChildIndex())}},insertChildHTML_:function(h,f,g){var d=this._selectedIndex;if(f){jq(a(this,f)).before(this.encloseChildHTML_(h));for(var e=h;e;e=e.nextSibling){c(this,e,e.getChildIndex())}if(f.getChildIndex()-1<=d){this._selectedIndex=d+1;this._animateShift(this._selectedIndex,true)}}else{jq(this.$n()).append(this.encloseChildHTML_(h));c(this,h,h.getChildIndex())}h.bind(g)},_removeChild:function(g){var d=this._selectedIndex,f=g.getChildIndex();if(d===this.nChildren-1){if(f<d){for(var e=g.nextSibling;e;e=e.nextSibling){c(this,e,e.getChildIndex()-1)}this._animateShift(this._selectedIndex-1,true);this._selectedIndex--}else{this.setSelectedIndex(d-1)}}else{if(f<=d){this._animateShift(this._selectedIndex-1,true)}for(var e=g.nextSibling;e;e=e.nextSibling){c(this,e,e.getChildIndex()-1)}this._animateShift(this._selectedIndex)}}})})();