(function(j,G){var w=Math,b=null,o=G.createElement("div").style,B=(function(){var J="t,webkitT,MozT,msT,OT".split(","),I,H=0,m=J.length;for(;H<m;H++){I=J[H]+"ransform";if(I in o){return J[H].substr(0,J[H].length-1)}}return false})(),F=B?"-"+B.toLowerCase()+"-":"",n=t("transform"),z=t("transitionProperty"),l=t("transitionDuration"),p=t("transformOrigin"),D=t("transitionTimingFunction"),f=t("transitionDelay"),C=(/android/gi).test(navigator.appVersion),i=(/iphone|ipad/gi).test(navigator.appVersion),s=(/hp-tablet/gi).test(navigator.appVersion),k=t("perspective") in o,A="ontouchstart" in j&&!s,e=!!B,g=t("transition") in o,h="onorientationchange" in j?"orientationchange":"resize",c=A?"touchstart":"mousedown",u=A?"touchmove":"mousemove",d=A?"touchend":"mouseup",y=A?"touchcancel":"mouseup",v=B=="Moz"?"DOMMouseScroll":"mousewheel",a=(function(){if(B===false){return false}var m={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return m[B]})(),r=(function(){return j.requestAnimationFrame||j.webkitRequestAnimationFrame||j.mozRequestAnimationFrame||j.oRequestAnimationFrame||j.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),q=(function(){return j.cancelRequestAnimationFrame||j.webkitCancelAnimationFrame||j.webkitCancelRequestAnimationFrame||j.mozCancelRequestAnimationFrame||j.oCancelRequestAnimationFrame||j.msCancelRequestAnimationFrame||clearTimeout})(),E=k?" translateZ(0)":"",x=function(K,m){var L=this,J;L.scroller=typeof K=="object"?K:G.getElementById(K);L.wrapper=L.scroller.parentNode;L.wrapper.style.overflow="hidden";L.wrapper.style.position="relative";var I=L.wrapper.offsetHeight;L.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:C,hideScrollbar:i,fadeScrollbar:i&&k,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(S){var R=S.target,Q=zk.Widget.$(jq("#"+L.wrapper.id));while(R.nodeType!=1){R=R.parentNode}var T=zk.Widget.$(jq("#"+R.id)),M=R.tagName,N=["SELECT","INPUT","TEXTAREA","BUTTON"],O=jq.inArray(M,N);if(O<0){var P=zk.currentFocus;if(P&&P.$instanceof&&zk.isLoaded("zul.inp")&&P.$instanceof(zul.inp.InputWidget)){P.getInputNode().blur()}S.preventDefault()}L._drag=false;if(T){do{if(T.getDraggable()!="false"){L._drag=true;break}T=T.parent}while(T&&T!=Q)}},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null,onSyncPos:null};for(J in m){L.options[J]=m[J]}L.x=L.options.x;L.y=L.options.y;L.options.useTransform=e&&L.options.useTransform;L.options.hScrollbar=L.options.hScroll&&L.options.hScrollbar;L.options.vScrollbar=L.options.vScroll&&L.options.vScrollbar;L.options.zoom=L.options.useTransform&&L.options.zoom;L.options.useTransition=g&&L.options.useTransition;if(L.options.zoom&&C){E=""}L.scroller.style[z]=L.options.useTransform?F+"transform":"top left";L.scroller.style[l]="0";L.scroller.style[p]="0 0";if(L.options.useTransition){L.scroller.style[D]="cubic-bezier(0.33,0.66,0.66,1)"}if(L.options.useTransform){L.scroller.style[n]="translate("+L.x+"px,"+L.y+"px)"+E}else{L.scroller.style.cssText+=";position:absolute;top:"+L.y+"px;left:"+L.x+"px";if(I){var H=I-L.wrapper.offsetHeight;if(H){jq(L.wrapper).height("+="+H)}}}if(L.options.useTransition){L.options.fixedScrollbar=true}L.refresh();L._bind(h,j);L._bind(c);if(!A){if(L.options.wheelAction!="none"){L._bind(v)}}if(L.options.checkDOMChanges){L.checkDOMTime=setInterval(function(){L._checkDOMChanges()},500)}};x.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,hasVScroll:function(){return this.options.vScrollbar?1:0},hasHScroll:function(){return this.options.vScrollbar},isScrollIntoView:function(K){var O=this.wrapper,L=jq(K).offset().top,N=L+K.offsetHeight,I=jq(K).offset().left,J=I+K.offsetWidth,H=jq(O).offset().top,M=H+O.offsetHeight,P=jq(O).offset().left,m=P+O.offsetWidth;if((this.hasVScroll()&&N<=M&&L>=H)||(this.hasHScroll()&&J<=m&&I>=P)){return true}else{return false}},handleEvent:function(H){var m=this;switch(H.type){case c:if(!A&&H.button!==0){return}m._start(H);break;case u:m._move(H);break;case d:case y:m._end(H);break;case h:m._resize();break;case v:m._wheel(H);break;case a:m._transitionEnd(H);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var I=this,H;if(!I[m+"Scrollbar"]){if(I[m+"ScrollbarWrapper"]){if(e){I[m+"ScrollbarIndicator"].style[n]=""}I[m+"ScrollbarWrapper"].parentNode.removeChild(I[m+"ScrollbarWrapper"]);I[m+"ScrollbarWrapper"]=null;I[m+"ScrollbarIndicator"]=null}return}if(!I[m+"ScrollbarWrapper"]){H=G.createElement("div");if(I.options.scrollbarClass){H.className=I.options.scrollbarClass+m.toUpperCase()}else{H.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(I.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(I.hScrollbar?"7":"2")+"px;top:2px;right:1px")}H.style.cssText+=";pointer-events:none;"+F+"transition-property:opacity;"+F+"transition-duration:"+(I.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(I.options.hideScrollbar?"0":"1");I.wrapper.appendChild(H);I[m+"ScrollbarWrapper"]=H;H=G.createElement("div");if(!I.options.scrollbarClass){H.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+F+"background-clip:padding-box;"+F+"box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";"+F+"border-radius:3px;border-radius:3px"}H.style.cssText+=";pointer-events:none;"+F+"transition-property:"+F+"transform;"+F+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+F+"transition-duration:0;"+F+"transform: translate(0,0)"+E;if(I.options.useTransition){H.style.cssText+=";"+F+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}I[m+"ScrollbarWrapper"].appendChild(H);I[m+"ScrollbarIndicator"]=H}if(m=="h"){I.hScrollbarSize=I.hScrollbarWrapper.clientWidth;I.hScrollbarIndicatorSize=w.max(w.round(I.hScrollbarSize*I.hScrollbarSize/I.scrollerW),8);I.hScrollbarIndicator.style.width=I.hScrollbarIndicatorSize+"px";I.hScrollbarMaxScroll=I.hScrollbarSize-I.hScrollbarIndicatorSize;I.hScrollbarProp=I.hScrollbarMaxScroll/I.maxScrollX}else{I.vScrollbarSize=I.vScrollbarWrapper.clientHeight;I.vScrollbarIndicatorSize=w.max(w.round(I.vScrollbarSize*I.vScrollbarSize/I.scrollerH),8);I.vScrollbarIndicator.style.height=I.vScrollbarIndicatorSize+"px";I.vScrollbarMaxScroll=I.vScrollbarSize-I.vScrollbarIndicatorSize;I.vScrollbarProp=I.vScrollbarMaxScroll/I.maxScrollY}I._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},C?250:0)},_pos:function(m,H){if(this.zoomed){return}m=this.hScroll?m:0;H=this.vScroll?H:0;if(this.options.useTransform){this.scroller.style[n]="translate("+m+"px,"+H+"px) scale("+this.scale+")"+E;this.syncPos={x:m,y:H};if(this.options.onSyncPos){this.options.onSyncPos.call(this)}}else{m=w.round(m);H=w.round(H);this.scroller.style.left=m+"px";this.scroller.style.top=H+"px"}this.x=m;this.y=H;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,J){var I=this,K=m=="h"?I.x:I.y,H;if(!I[m+"Scrollbar"]){return}K=I[m+"ScrollbarProp"]*K;if(K<0){if(!I.options.fixedScrollbar){H=I[m+"ScrollbarIndicatorSize"]+w.round(K*3);if(H<8){H=8}I[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=H+"px"}K=0}else{if(K>I[m+"ScrollbarMaxScroll"]){if(!I.options.fixedScrollbar){H=I[m+"ScrollbarIndicatorSize"]-w.round((K-I[m+"ScrollbarMaxScroll"])*3);if(H<8){H=8}I[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=H+"px";K=I[m+"ScrollbarMaxScroll"]+(I[m+"ScrollbarIndicatorSize"]-H)}else{K=I[m+"ScrollbarMaxScroll"]}}}I[m+"ScrollbarWrapper"].style[f]="0";I[m+"ScrollbarWrapper"].style.opacity=J&&I.options.hideScrollbar?"0":"1";I[m+"ScrollbarIndicator"].style[n]="translate("+(m=="h"?K+"px,0)":"0,"+K+"px)")+E},_start:function(M){var L=this,H=A?M.touches[0]:M,I,m,N,K,J;if(!L.enabled||b){return}if(L.options.onBeforeScrollStart){L.options.onBeforeScrollStart.call(L,M)}if(L._drag){return}b=this.wrapper;if(L.options.useTransition||L.options.zoom){L._transitionTime(0)}L.moved=false;L.animating=false;L.zoomed=false;L.distX=0;L.distY=0;L.absDistX=0;L.absDistY=0;L.dirX=0;L.dirY=0;if(L.options.zoom&&A&&M.touches.length>1){K=w.abs(M.touches[0].pageX-M.touches[1].pageX);J=w.abs(M.touches[0].pageY-M.touches[1].pageY);L.touchesDistStart=w.sqrt(K*K+J*J);L.originX=w.abs(M.touches[0].pageX+M.touches[1].pageX-L.wrapperOffsetLeft*2)/2-L.x;L.originY=w.abs(M.touches[0].pageY+M.touches[1].pageY-L.wrapperOffsetTop*2)/2-L.y;if(L.options.onZoomStart){L.options.onZoomStart.call(L,M)}}if(L.options.momentum){if(L.options.useTransform){I=getComputedStyle(L.scroller,null)[n].replace(/[^0-9\-.,]/g,"").split(",");m=+I[4];N=+I[5]}else{m=+getComputedStyle(L.scroller,null).left.replace(/[^0-9-]/g,"");N=+getComputedStyle(L.scroller,null).top.replace(/[^0-9-]/g,"")}if(m!=L.x||N!=L.y){if(L.options.useTransition){L._unbind(a)}else{q(L.aniTime)}L.steps=[];L._pos(m,N);if(L.options.onScrollEnd){L.options.onScrollEnd.call(L)}}}L.absStartX=L.x;L.absStartY=L.y;L.startX=L.x;L.startY=L.y;L.pointX=H.pageX;L.pointY=H.pageY;L.startTime=M.timeStamp||Date.now();if(L.options.onScrollStart){L.options.onScrollStart.call(L,M)}L._bind(u);L._bind(d);L._bind(y)},_move:function(P){P.stopPropagation();var N=this,Q=A?P.touches[0]:P,L=Q.pageX-N.pointX,J=Q.pageY-N.pointY,m=N.x+L,S=N.y+J,M,K,I,O=P.timeStamp||Date.now();var H=P.target;while(H.nodeType!=1){H=H.parentNode}var R=H.tagName;if(R=="TEXTAREA"&&H.scrollHeight>=H.offsetHeight){return}if(N.options.onBeforeScrollMove){N.options.onBeforeScrollMove.call(N,P)}if(N.options.zoom&&A&&P.touches.length>1){M=w.abs(P.touches[0].pageX-P.touches[1].pageX);K=w.abs(P.touches[0].pageY-P.touches[1].pageY);N.touchesDist=w.sqrt(M*M+K*K);N.zoomed=true;I=1/N.touchesDistStart*N.touchesDist*this.scale;if(I<N.options.zoomMin){I=0.5*N.options.zoomMin*Math.pow(2,I/N.options.zoomMin)}else{if(I>N.options.zoomMax){I=2*N.options.zoomMax*Math.pow(0.5,N.options.zoomMax/I)}}N.lastScale=I/this.scale;m=this.originX-this.originX*N.lastScale+this.x,S=this.originY-this.originY*N.lastScale+this.y;this.scroller.style[n]="translate("+m+"px,"+S+"px) scale("+I+")"+E;if(N.options.onZoom){N.options.onZoom.call(N,P)}return}N.pointX=Q.pageX;N.pointY=Q.pageY;if(m>0||m<N.maxScrollX){m=N.options.bounce?N.x+(L/2):m>=0||N.maxScrollX>=0?0:N.maxScrollX}if(S>N.minScrollY||S<N.maxScrollY){S=N.options.bounce?N.y+(J/2):S>=N.minScrollY||N.maxScrollY>=0?N.minScrollY:N.maxScrollY}N.distX+=L;N.distY+=J;N.absDistX=w.abs(N.distX);N.absDistY=w.abs(N.distY);if(N.absDistX<6&&N.absDistY<6){return}if(N.options.lockDirection){if(N.absDistX>N.absDistY+5){S=N.y;J=0}else{if(N.absDistY>N.absDistX+5){m=N.x;L=0}}}N.moved=true;N._pos(m,S);N.dirX=L>0?-1:L<0?1:0;N.dirY=J>0?-1:J<0?1:0;if(O-N.startTime>300){N.startTime=O;N.startX=N.x;N.startY=N.y}if(N.options.onScrollMove){N.options.onScrollMove.call(N,P)}},_end:function(O){b=null;var M=this,U=A?O.changedTouches[0]:O,P,T,I={dist:0,time:0},m={dist:0,time:0},L=(O.timeStamp||Date.now())-M.startTime,Q=M.x,N=M.y,S,R,H,K,J;M._unbind(u);M._unbind(d);M._unbind(y);if(M.options.onBeforeScrollEnd){M.options.onBeforeScrollEnd.call(M,O)}if(M.zoomed){J=M.scale*M.lastScale;J=Math.max(M.options.zoomMin,J);J=Math.min(M.options.zoomMax,J);M.lastScale=J/M.scale;M.scale=J;M.x=M.originX-M.originX*M.lastScale+M.x;M.y=M.originY-M.originY*M.lastScale+M.y;M.scroller.style[l]="200ms";M.scroller.style[n]="translate("+M.x+"px,"+M.y+"px) scale("+M.scale+")"+E;M.zoomed=false;M.refresh();if(M.options.onZoomEnd){M.options.onZoomEnd.call(M,O)}return}if(!M.moved){if(A){if(M.doubleTapTimer&&M.options.zoom){clearTimeout(M.doubleTapTimer);M.doubleTapTimer=null;if(M.options.onZoomStart){M.options.onZoomStart.call(M,O)}M.zoom(M.pointX,M.pointY,M.scale==1?M.options.doubleTapZoom:1);if(M.options.onZoomEnd){setTimeout(function(){M.options.onZoomEnd.call(M,O)},200)}}else{if(this.options.handleClick){M.doubleTapTimer=setTimeout(function(){M.doubleTapTimer=null;P=U.target;while(P.nodeType!=1){P=P.parentNode}var V=P.tagName;if(V!="SELECT"&&V!="INPUT"&&V!="TEXTAREA"&&V!="BUTTON"){T=G.createEvent("MouseEvents");T.initMouseEvent("click",true,true,O.view,1,U.screenX,U.screenY,U.clientX,U.clientY,O.ctrlKey,O.altKey,O.shiftKey,O.metaKey,0,null);T._fake=true;P.dispatchEvent(T)}},M.options.zoom?250:0)}}}M._resetPos(400);if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}return}if(L<300&&M.options.momentum){I=Q?M._momentum(Q-M.startX,L,-M.x,M.scrollerW-M.wrapperW+M.x,M.options.bounce?M.wrapperW:0):I;m=N?M._momentum(N-M.startY,L,-M.y,(M.maxScrollY<0?M.scrollerH-M.wrapperH+M.y-M.minScrollY:0),M.options.bounce?M.wrapperH:0):m;Q=M.x+I.dist;N=M.y+m.dist;if((M.x>0&&Q>0)||(M.x<M.maxScrollX&&Q<M.maxScrollX)){I={dist:0,time:0}}if((M.y>M.minScrollY&&N>M.minScrollY)||(M.y<M.maxScrollY&&N<M.maxScrollY)){m={dist:0,time:0}}}if(I.dist||m.dist){H=w.max(w.max(I.time,m.time),10);if(M.options.snap){S=Q-M.absStartX;R=N-M.absStartY;if(w.abs(S)<M.options.snapThreshold&&w.abs(R)<M.options.snapThreshold){M.scrollTo(M.absStartX,M.absStartY,200)}else{K=M._snap(Q,N);Q=K.x;N=K.y;H=w.max(K.time,H)}}M.scrollTo(w.round(Q),w.round(N),H);if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}return}if(M.options.snap){S=Q-M.absStartX;R=N-M.absStartY;if(w.abs(S)<M.options.snapThreshold&&w.abs(R)<M.options.snapThreshold){M.scrollTo(M.absStartX,M.absStartY,200)}else{K=M._snap(M.x,M.y);if(K.x!=M.x||K.y!=M.y){M.scrollTo(K.x,K.y,K.time)}}if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}return}M._resetPos(200);if(M.options.onTouchEnd){M.options.onTouchEnd.call(M,O)}},_resetPos:function(I){var m=this,J=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,H=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(J==m.x&&H==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(B=="webkit"){m.hScrollbarWrapper.style[f]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(B=="webkit"){m.vScrollbarWrapper.style[f]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(J,H,I||0)},_wheel:function(L){var J=this,K,I,H,m,M;if("wheelDeltaX" in L){K=L.wheelDeltaX/12;I=L.wheelDeltaY/12}else{if("wheelDelta" in L){K=I=L.wheelDelta/12}else{if("detail" in L){K=I=-L.detail*3}else{return}}}if(J.options.wheelAction=="zoom"){M=J.scale*Math.pow(2,1/3*(I?I/Math.abs(I):0));if(M<J.options.zoomMin){M=J.options.zoomMin}if(M>J.options.zoomMax){M=J.options.zoomMax}if(M!=J.scale){if(!J.wheelZoomCount&&J.options.onZoomStart){J.options.onZoomStart.call(J,L)}J.wheelZoomCount++;J.zoom(L.pageX,L.pageY,M,400);setTimeout(function(){J.wheelZoomCount--;if(!J.wheelZoomCount&&J.options.onZoomEnd){J.options.onZoomEnd.call(J,L)}},400)}return}H=J.x+K;m=J.y+I;if(H>0){H=0}else{if(H<J.maxScrollX){H=J.maxScrollX}}if(m>J.minScrollY){m=J.minScrollY}else{if(m<J.maxScrollY){m=J.maxScrollY}}if(J.maxScrollY<0){J.scrollTo(H,m,0)}},_transitionEnd:function(H){var m=this;if(H.target!=m.scroller){return}m._unbind(a);m._startAni()},_startAni:function(){var M=this,H=M.x,m=M.y,K=Date.now(),L,J,I;if(M.animating){return}if(!M.steps.length){M._resetPos(400);return}L=M.steps.shift();if(L.x==H&&L.y==m){L.time=0}M.animating=true;M.moved=true;if(M.options.useTransition){M._transitionTime(L.time);M._pos(L.x,L.y);M.animating=false;if(L.time){M._bind(a)}else{M._resetPos(0)}return}I=function(){var N=Date.now(),P,O;if(N>=K+L.time){M._pos(L.x,L.y);M.animating=false;if(M.options.onAnimationEnd){M.options.onAnimationEnd.call(M)}M._startAni();return}N=(N-K)/L.time-1;J=w.sqrt(1-N*N);P=(L.x-H)*J+H;O=(L.y-m)*J+m;M._pos(P,O);if(M.animating){M.aniTime=r(I)}};I()},_transitionTime:function(m){m+="ms";this.scroller.style[l]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[l]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[l]=m}},_momentum:function(N,H,L,m,P){var M=this._zdeceleration||0.0006,I=w.abs(N)/H,J=(I*I)/(2*M),O=0,K=0;if(N>0&&J>L){K=P/(6/(J/I*M));L=L+K;I=I*L/J;J=L}else{if(N<0&&J>m){K=P/(6/(J/I*M));m=m+K;I=I*m/J;J=m}}J=J*(N<0?-1:1);O=I/M;return{dist:J,time:w.round(O)}},_offset:function(m){var I=-m.offsetLeft,H=-m.offsetTop;while(m=m.offsetParent){I-=m.offsetLeft;H-=m.offsetTop}if(m!=this.wrapper){I*=this.scale;H*=this.scale}return{left:I,top:H}},_snap:function(O,N){var L=this,K,J,M,I,H,m;M=L.pagesX.length-1;for(K=0,J=L.pagesX.length;K<J;K++){if(O>=L.pagesX[K]){M=K;break}}if(M==L.currPageX&&M>0&&L.dirX<0){M--}O=L.pagesX[M];H=w.abs(O-L.pagesX[L.currPageX]);H=H?w.abs(L.x-O)/H*500:0;L.currPageX=M;M=L.pagesY.length-1;for(K=0;K<M;K++){if(N>=L.pagesY[K]){M=K;break}}if(M==L.currPageY&&M>0&&L.dirY<0){M--}N=L.pagesY[M];m=w.abs(N-L.pagesY[L.currPageY]);m=m?w.abs(L.y-N)/m*500:0;L.currPageY=M;I=w.round(w.max(H,m))||200;return{x:O,y:N,time:I}},_bind:function(I,H,m){(H||this.scroller).addEventListener(I,this,!!m)},_unbind:function(I,H,m){(H||this.scroller).removeEventListener(I,this,!!m)},destroy:function(){var m=this;m.scroller.style[n]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(h,j);m._unbind(c);m._unbind(u);m._unbind(d);m._unbind(y);if(!m.options.hasTouch){m._unbind(v)}if(m.options.useTransition){m._unbind(a)}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var N=this,J,L,I,K,Q=0,O=0;if(N.scale<N.options.zoomMin){N.scale=N.options.zoomMin}var m=N.wrapper,M=zk(m);N.wrapperW=(m.offsetWidth-M.padBorderWidth())||1;N.wrapperH=(m.offsetHeight-M.padBorderHeight())||1;N.minScrollY=-N.options.topOffset||0;N.scrollerW=w.round(N.scroller.offsetWidth*N.scale);N.scrollerH=w.round((N.scroller.offsetHeight+N.minScrollY)*N.scale);N.maxScrollX=N.wrapperW-N.scrollerW;N.maxScrollY=N.wrapperH-N.scrollerH+N.minScrollY;N.dirX=0;N.dirY=0;var H=N.wrapper.parentNode;if(H){var U=zk.Widget.$(jq("#"+H.id)),S=U?U._listbox$rod||U._grid$rod:false;if(S){var R,T=N.scroller.previousSibling,P=N.scroller.nextSibling;if(T&&P){N.scrollerH=N.scroller.offsetHeight+T.offsetHeight+P.offsetHeight;R=N.wrapperH-w.round((N.scrollerH-N.minScrollY)*N.scale);N.maxScrollY=R<0?R:0}}}if(N.options.onRefresh){N.options.onRefresh.call(N)}N.hScroll=N.options.hScroll&&N.maxScrollX<0;N.vScroll=N.options.vScroll&&(!N.options.bounceLock&&!N.hScroll||N.scrollerH>N.wrapperH);N.hScrollbar=N.hScroll&&N.options.hScrollbar;N.vScrollbar=N.vScroll&&N.options.vScrollbar&&N.scrollerH>N.wrapperH;J=N._offset(N.wrapper);N.wrapperOffsetLeft=-J.left;N.wrapperOffsetTop=-J.top;if(typeof N.options.snap=="string"){N.pagesX=[];N.pagesY=[];K=N.scroller.querySelectorAll(N.options.snap);for(L=0,I=K.length;L<I;L++){Q=N._offset(K[L]);Q.left+=N.wrapperOffsetLeft;Q.top+=N.wrapperOffsetTop;N.pagesX[L]=Q.left<N.maxScrollX?N.maxScrollX:Q.left*N.scale;N.pagesY[L]=Q.top<N.maxScrollY?N.maxScrollY:Q.top*N.scale}}else{if(N.options.snap){N.pagesX=[];while(Q>=N.maxScrollX){N.pagesX[O]=Q;Q=Q-N.wrapperW;O++}if(N.maxScrollX%N.wrapperW){N.pagesX[N.pagesX.length]=N.maxScrollX-N.pagesX[N.pagesX.length-1]+N.pagesX[N.pagesX.length-1]}Q=0;O=0;N.pagesY=[];while(Q>=N.maxScrollY){N.pagesY[O]=Q;Q=Q-N.wrapperH;O++}if(N.maxScrollY%N.wrapperH){N.pagesY[N.pagesY.length]=N.maxScrollY-N.pagesY[N.pagesY.length-1]+N.pagesY[N.pagesY.length-1]}}}N._scrollbar("h");N._scrollbar("v");if(!N.zoomed){N.scroller.style[l]="0";N._resetPos(400)}},scrollTo:function(m,N,M,L){var K=this,J=m,I,H;K.stop();if(!J.length){J=[{x:m,y:N,time:M,relative:L}]}for(I=0,H=J.length;I<H;I++){if(J[I].relative){J[I].x=K.x-J[I].x;J[I].y=K.y-J[I].y}K.steps.push({x:J[I].x,y:J[I].y,time:J[I].time||0})}K._startAni()},scrollToElement:function(m,I){var H=this,J;m=m.nodeType?m:H.scroller.querySelector(m);if(!m){return}J=H._offset(m);J.left+=H.wrapperOffsetLeft;J.top+=H.wrapperOffsetTop;J.left=J.left>0?0:J.left<H.maxScrollX?H.maxScrollX:J.left;J.top=J.top>H.minScrollY?H.minScrollY:J.top<H.maxScrollY?H.maxScrollY:J.top;I=I===undefined?w.max(w.abs(J.left)*2,w.abs(J.top)*2):I;H.scrollTo(J.left,J.top,I)},scrollToPage:function(I,H,K){var J=this,m,L;K=K===undefined?400:K;if(J.options.onScrollStart){J.options.onScrollStart.call(J)}if(J.options.snap){I=I=="next"?J.currPageX+1:I=="prev"?J.currPageX-1:I;H=H=="next"?J.currPageY+1:H=="prev"?J.currPageY-1:H;I=I<0?0:I>J.pagesX.length-1?J.pagesX.length-1:I;H=H<0?0:H>J.pagesY.length-1?J.pagesY.length-1:H;J.currPageX=I;J.currPageY=H;m=J.pagesX[I];L=J.pagesY[H]}else{m=-J.wrapperW*I;L=-J.wrapperH*H;if(m<J.maxScrollX){m=J.maxScrollX}if(L<J.maxScrollY){L=J.maxScrollY}}J.scrollTo(m,L,K)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(u);this._unbind(d);this._unbind(y)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind(a)}else{q(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,L,K,J){var H=this,I=K/H.scale;if(!H.options.useTransform){return}H.zoomed=true;J=J===undefined?200:J;m=m-H.wrapperOffsetLeft-H.x;L=L-H.wrapperOffsetTop-H.y;H.x=m-m*I+H.x;H.y=L-L*I+H.y;H.scale=K;H.refresh();H.x=H.x>0?0:H.x<H.maxScrollX?H.maxScrollX:H.x;H.y=H.y>H.minScrollY?H.minScrollY:H.y<H.maxScrollY?H.maxScrollY:H.y;H.scroller.style[l]=J+"ms";H.scroller.style[n]="translate("+H.x+"px,"+H.y+"px) scale("+K+")"+E;H.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};function t(m){if(B===""){return m}m=m.charAt(0).toUpperCase()+m.substr(1);return B+m}o=null;if(typeof exports!=="undefined"){exports.iScroll=x}else{j.iScroll=x}})(window,document);