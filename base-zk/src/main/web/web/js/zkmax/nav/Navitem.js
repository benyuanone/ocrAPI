(function(){zkmax.nav.Navitem=zk.$extends(zul.LabelImageWidget,{_content:"",setHref:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_href",(function(a){if(this.desktop){this.$n("a").href=a||""}})),getHref:_zkf$=function(){return this._href},isHref:_zkf$,setTarget:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_target",(function(a){if(this.desktop){this.$n("a").target=a||""}})),getTarget:_zkf$=function(){return this._target},isTarget:_zkf$,setDisabled:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_disabled",(function(a){if(this.desktop){var b=this.$n("a");a?jq(b).attr("disabled","disabled"):jq(b).removeAttr("disabled")}})),getDisabled:_zkf$=function(){return this._disabled},isDisabled:_zkf$,setSelected:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_selected",(function(a){if(this.desktop){var c=this.$n();if(a){var b=this.$s("selected");jq(c).addClass(b);if(this._isPopup){jq(this.$n("text")).addClass(b)}}else{jq(c).removeClass(this.$s("selected"))}this._openNav();zk(c).redoCSS(-1,{fixFontIcon:true})}})),getSelected:_zkf$=function(){return this._selected},isSelected:_zkf$,setContent:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_content",(function(){this.rerender()})),getContent:_zkf$=function(){return this._content},isContent:_zkf$,_openNav:function(){if(!this.isTopmost()){var b=this.parent,c=b.getNavbar(),a=this._selected?function(d){d.setOpen(true);jq(d.$n()).addClass(d.$s("selected"))}:function(d){jq(d.$n()).removeClass(d.$s("selected"))};do{a(b);zk(b).redoCSS(-1,{fixFontIcon:true,selector:"> .z-nav-content"});b=b.parent}while(b&&b!=c)}},isTopmost:function(){return this._topmost},getNavbar:function(){var a=this.parent;while(a&&a.$instanceof(zkmax.nav.Nav)){a=a.parent}return a},_openPopup:function(){if(!this._isPopup){var d=this.$n("text"),b=jq(d),a=d.style,c=zk(this.$n("a")).dimension(true);b.addClass(this.$s("text-popup"));a.display="block";a.position="absolute";b.zk.makeVParent();zWatch.fireDown("onVParent",this);if(this.getNavbar().isVertical()){zk(d).position(c,"end_before",{dodgeRef:true})}else{if(c.top+c.height+zk(d).offsetHeight()>jq.innerHeight()+jq.innerY()){zk(d).position(c,"before_start")}else{zk(d).position(c,"after_start")}}if(this.isSelected()){b.addClass(this.$s("selected"))}this._isPopup=true}},_closePopup:function(){if(!this._shallPopup&&this._isPopup){var a=this.$n("text");$text=jq(a),tstyle=a.style;tstyle.display=tstyle.position=tstyle.left=tstyle.top="";$text.removeClass(this.$s("text-popup"));zk(a).undoVParent();zWatch.fireDown("onVParent",this);$text.removeClass(this.$s("selected"));this._isPopup=false}},beforeParentChanged_:function(a){this._topmost=a&&a.$instanceof(zkmax.nav.Navbar);this.$supers("beforeParentChanged_",arguments)},doSelect_:function(a){if(this._disabled||a.name=="onRightClick"){return}this.getNavbar().setSelectedItem(this);this.$supers("doSelect_",arguments);var b=this.getHref();if(b&&!b.startsWith("javascript:")){zUtl.go(b,{target:this.getTarget()})}},doClick_:function(a){if(this._disabled){a.stop()}else{this.$super("doClick_",a)}},_doMouseEnter:function(a){if(this.getNavbar().isCollapsed()&&this.isTopmost()){this._shallPopup=true;this._openPopup()}},_doMouseLeave:function(a){if(this._isPopup){this._shallPopup=false;var b=this;setTimeout(function(){b._closePopup()},100)}},bind_:function(){this.$supers("bind_",arguments);if(this._selected){this._openNav();jq(this.$n()).addClass(this.$s("selected"))}zk(this).redoCSS(-1,{fixFontIcon:true});var a=this.$n(),b=this.$n("text");this.domListen_(a,"onMouseEnter").domListen_(a,"onMouseLeave").domListen_(b,"onMouseEnter").domListen_(b,"onMouseLeave")},unbind_:function(){var a=this.$n(),b=this.$n("text");this.domUnlisten_(a,"onMouseEnter").domUnlisten_(a,"onMouseLeave").domUnlisten_(b,"onMouseEnter").domUnlisten_(b,"onMouseLeave");this.$supers(zkmax.nav.Navitem,"unbind_",arguments)},domContent_:function(){var c='<span id="'+this.uuid+'-text" class="'+this.$s("text")+'">'+(zUtl.encodeXML(this.getLabel()))+"</span>",a=this.getImage(),b=this.domIcon_();if(a){a='<img src="'+a+'" class="'+this.$s("image")+'" align="absmiddle" />'+(b?" "+b:"")}else{if(b){a=b}else{a='<img src="data:image/png;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="'+this.$s("image")+'" align="absmiddle" />'}}return a+c+this._content}})})();