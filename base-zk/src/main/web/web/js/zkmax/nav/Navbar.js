(function(){zkmax.nav.Navbar=zk.$extends(zul.Widget,{_orient:"horizontal",_collapsed:false,_selectedItem:null,setOrient:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_orient",(function(){this.updateDomClass_();if(this.desktop){this._adjustWidth()}})),getOrient:_zkf$=function(){return this._orient},isOrient:_zkf$,setCollapsed:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_collapsed",(function(){this.updateDomClass_();if(this.desktop){this._adjustWidth();this.refreshNav()}})),getCollapsed:_zkf$=function(){return this._collapsed},isCollapsed:_zkf$,isHorizontal:function(){return this._orient=="horizontal"},isVertical:function(){return this._orient=="vertical"},getSelectedItem:function(){return this._selectedItem},setSelectedItem:function(b){var a=this._selectedItem;if(a!=b){this.closeNav(b);if(b){this._select(b)}else{this.clearSelection()}}},closeNav:function(b){var c=this._selectedItem,e=b?b.parent:this;for(var a=e.firstChild;a;a=a.nextSibling){if(a.$instanceof(zkmax.nav.Nav)&&a.isOpen()){a.close()}}if(c){var d=c.parent;if(d.bindLevel==e.bindLevel){for(var a=d.firstChild;a;a=a.nextSibling){if(a.$instanceof(zkmax.nav.Nav)&&a.isOpen()){a.close()}}}else{if(d.bindLevel<e.bindLevel){do{e=e.parent}while(d.bindLevel<e.bindLevel)}else{do{if(d.$instanceof(zkmax.nav.Nav)&&d.isOpen()){d.close()}d=d.parent}while(d.bindLevel>e.bindLevel)}}while(d!=e){if(d.$instanceof(zkmax.nav.Nav)&&d.isOpen()){d.close()}d=d.parent;e=e.parent}}},showNav:function(b){for(var a=b.firstChild;a;a=a.nextSibling){if(a.$instanceof(zkmax.nav.Nav)){jq(a.$n("cave")).show();this.showNav(a)}}},hideNav:function(b){for(var a=b.firstChild;a;a=a.nextSibling){if(a.$instanceof(zkmax.nav.Nav)&&!a.isOpen()){jq(a.$n("cave")).hide();this.hideNav(a)}}},refreshNav:function(){for(var a=this.firstChild;a;a=a.nextSibling){if(a.$instanceof(zkmax.nav.Nav)&&a.isOpen()){var b=a.$n("cave");this.isCollapsed()?jq(b).hide():jq(b).show();a=a.firstChild}}},_adjustWidth:function(){if(this.getHflex()=="min"){if(this.isVertical()&&!this.isCollapsed()){var c=this.$n("cave"),a=c.style,b=a.display;a.display="inline-block";this.showNav(this);this.$n().style.width=jq.px0(zk(c).offsetWidth());a.display=b;this.hideNav(this)}else{this.$n().style.width=""}}},afterChildrenMinFlex_:function(a){if(a=="w"){this._adjustWidth()}},clearSelection:function(){var a=this._selectedItem;if(a){a.setSelected(false);a=null}},_select:function(a){var b=this._selectedItem;if(!a){this.clearSelection()}else{if(b!==a){if(b){this._selectedItem.setSelected(false)}this._selectedItem=a;this._changeSelect(a,true);this.fire("onSelect",{items:[a],reference:this})}}},_changeSelect:function(b,a){var c=b.isSelected()!=a;if(c){b.setSelected(a)}return c},domClass_:function(b){var a=this.$supers("domClass_",arguments);if(!b||!b.zclass){a+=" "+this.$s(this.getOrient());if(this.isCollapsed()){a+=" "+this.$s("collapsed")}}return a},encloseChildHTML_:function(b){var a=b.out||[],c=b.child;c.redraw(a);if(!b.out){return a.join("")}}})})();