zkmax.layout.Portalchildren=zk.$extends(zul.Widget,{dragControl:function(b){var a=this.parent;if(a){a._cleanupDrag(b);a._initDrag(b)}return true},bind_:function(){this.$supers(zkmax.layout.Portalchildren,"bind_",arguments);var a=this.$n();this._oriSize=this.parent.isVertical()?a.style.width:a.style.height},replaceChildHTML_:function(b){var a=this.parent;if(a){a._cleanupDrag(b)}this.$supers("replaceChildHTML_",arguments);if(a){a._initDrag(b)}},onMaximize:function(b){if(this.parent.getMaximizedMode()=="whole"){return}var f=b.target,c=f.$n(),e=this.$n("cave"),a=b.data.maximized;jq(e).children().each(function(){if(this!=c){var g=zk.Widget.$(this);if(a){this.style.display="none"}else{if(g.isVisible()){this.style.display="";var h;if((g._draggable!="false")&&(h=g.$n("cap"))){jq(h).addClass(g.$s("header-move"))}if(g.isMaximized()){g.setMaximized(false,true)}else{zUtl.fireSized(g)}}}}});var d;if((f._draggable!="false")&&(d=f.$n("cap"))){jq(d)[a?"removeClass":"addClass"](f.$s("header-move"))}if(b.data.fromServer){b.stop()}},_addListen:function(a){a.listen({onMaximize:this,onSize:this.onSizePanel})},_removeListen:function(a){a.unlisten({onMaximize:this,onSize:this.onSizePanel})},_renderChild:function(a){if(this.desktop&&this.parent){this.parent._initDrag(a);zUtl.fireSized(zk.Widget.$(this.parent))}this._addListen(a)},onChildAdded_:function(a){a.z$rod0=false;this.$supers("onChildAdded_",arguments);this._renderChild(a)},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(this.desktop&&this.parent){this.parent._cleanupDrag(a);if(this.parent.getMaximizedMode()=="column"&&a.isMaximized()){this.onMaximize({target:a,data:{maximized:false}})}zUtl.fireSized(zk.Widget.$(this.parent))}this._removeListen(a)},onSizePanel:function(f){var d=this.parent,c=d.parent.isVertical();if(d.__updatingSize__){return}try{d.__updatingSize__=true;if(c){var e=f.width;if(e!=d.getWidth()){for(var b=d.firstChild;b;b=b.nextSibling){if(b!=this){b.setWidth(e);b.fire("onSize",{width:e,height:b.getHeight()})}}d.setWidth(e)}}else{var a=f.height;if(a!=d.getHeight()){for(var b=d.firstChild;b;b=b.nextSibling){if(b!=this){b.setHeight(a);b.fire("onSize",{width:b.getWidth(),height:a})}}d.setHeight(a)}}}finally{d.__updatingSize__=null}},setHeight:function(a){this.$supers("setHeight",arguments);this.syncOriSize()},setWidth:function(a){this.$supers("setWidth",arguments);this.syncOriSize()},syncOriSize:function(){var a=this.$n();if(a){this._oriSize=this.parent.isVertical()?a.style.width:a.style.height;zUtl.fireSized(this.parent,true)}},onChildRenderDefer_:function(a){a._renderdefer=-1;this._renderChild(a)},isExcludedVflex_:function(){return true}});