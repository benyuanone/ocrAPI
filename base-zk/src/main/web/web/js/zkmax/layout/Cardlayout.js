(function(){function a(d){if(d){zkmax.rodRender(d)}}function c(f,g,d){var h=f.$n(),e=b(f,g);if(f.isHorizontal()){e.style.left=(g.getChildIndex()-d)*h.offsetWidth+"px"}else{e.style.top=(g.getChildIndex()-d)*h.offsetHeight+"px"}}function b(d,e){return d.$n(e.uuid+"-chdex")}zkmax.layout.Cardlayout=zk.$extends(zul.Widget,{_selectedIndex:0,_orient:"horizontal",setOrient:(function(d,e){return function(f,g){var h=this[d];this[d]=f;if(h!==f||(g&&g.force)){this.__fname__=d.substring(1);e.apply(this,arguments);delete this.__fname__}return this}})("_orient",(function(){this.rerender()})),getOrient:_zkf$=function(){return this._orient},isOrient:_zkf$,getSelectedIndex:function(){return this._selectedIndex},setSelectedIndex:function(d){if(!d||d<0){d=0}if(this.desktop){a(this.getChildAt(d));a(this.getChildAt(d+1));a(this.getChildAt(d-1));this._animateShift(d)}this._selectedIndex=d},_animateShift:function(e){var d=this.isHorizontal(),f=this._selectedIndex-e,h=Math.abs(f)*(d?this.$n().offsetWidth:this.$n().offsetHeight),g=f>0?"+="+h:"-="+h;if(d){jq("#"+this.uuid+"> ."+this.$s("inner")).animate({left:g},zk(this).getAnimationSpeed("slow"))}else{jq("#"+this.uuid+"> ."+this.$s("inner")).animate({top:g},zk(this).getAnimationSpeed("slow"))}},isVertical:function(){return"vertical"==this._orient},isHorizontal:function(){return"horizontal"==this._orient},setFlexSize_:function(g,e){if(!this._selectedIndex){return this.$supers("setFlexSize_",arguments)}var h=this.$n(),d=zk(h),f=this.getChildAt(this._selectedIndex).$n();margin=this.getMarginSize_("w");if(g.height!==undefined){if(g.height=="auto"){h.style.height=""}else{if(g.height!=""||g.height===0){if(this._vflex=="min"){h.style.height=jq.px(f.offsetHeight)}else{this.setFlexSizeH_(h,d,g.height,e)}}else{h.style.height=this._height||""}}}if(g.width!==undefined){if(g.width=="auto"){h.style.width=""}else{if(g.width!=""||g.width===0){if(this._hflex=="min"){h.style.width=jq.px(f.offsetWidth)}else{this.setFlexSizeW_(h,d,g.width,e)}}else{h.style.width=this._width||""}}}},bind_:function(){this.$supers("bind_",arguments);zWatch.listen({onSize:this})},unbind_:function(){zWatch.unlisten({onSize:this});this.$supers("unbind_",arguments)},onSize:function(){var d=this._selectedIndex;for(var e=this.firstChild;e;e=e.nextSibling){c(this,e,d)}},insertChildHTML_:function(h,f,g){var d=this._selectedIndex;if(f){jq(b(this,f)).before(this.encloseChildHTML_(h));if(f.getChildIndex()-1>d){for(var e=h;e;e=e.nextSibling){c(this,e,d)}}else{d++;for(var e=f.previousSibling;e;e=e.previousSibling){c(this,e,d)}this._selectedIndex=d}}else{jq(this.$n()).append(this.encloseChildHTML_(h));c(this,h,d)}h.bind(g)},removeChild:function(d){a(d);this._removeChild(d);this.$supers("removeChild",arguments);delete this._subnodes[d.uuid+"-chdex"]},_removeChild:function(g){var d=this._selectedIndex,f=g.getChildIndex();if(d==f&&d==this.nChildren-1){if(this.nChildren!=1){this.setSelectedIndex(d-1)}return}if(f<=d){if(d===this.nChildren-1){this._selectedIndex--;a(this.getChildAt(this._selectedIndex-1));for(var e=g.previousSibling;e;e=e.previousSibling){c(this,e,d-1)}}else{for(var e=g.previousSibling;e;e=e.previousSibling){c(this,e,d-1)}this.setSelectedIndex(d+1);this._selectedIndex=d}}else{for(var e=g.nextSibling;e;e=e.nextSibling){c(this,e,d+1)}}},removeChildHTML_:function(d){this.$supers("removeChildHTML_",arguments);jq(b(this,d)).remove()},encloseChildHTML_:function(m,g){var f=this._selectedIndex,d=this.uuid,k=m.getChildIndex(),l=[],e=[];if(!this._vflex||"min"!=this._vflex){e.push("height:100%")}if(this._hflex||"min"!=this._hflex){e.push("width:100%")}l.push('<div id="',d,"-",m.uuid,"-chdex",'" class="',this.$s("inner"),'" style="',e.join(";"),'">');if(k>=f-1&&k<=f+1){m.redraw(l)}else{m.z_rod=true;l.push('<div id="',m.uuid,'" style="display:none;border:1px solid"></div>')}l.push("</div>");if(!g){return l.join("")}for(var h=0,i=l.length;h<i;++h){g.push(l[h])}}},{minSwipeLowerBound:30,minSwipeUpperBound:300,maxSwipeLowerBound:75,ignoreClass:zul.wgt.Image})})();